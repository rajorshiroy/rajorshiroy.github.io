var errorElem = [];
var msg='';
var url='';
var _URL_ = window.URL || window.webkitURL;
var routeUrl= window.location.href.split("/").reverse()[1];
$(function() {
	
	$( ".date" ).datepicker();
	if($('.date').val()==""){ 
		$('.date').datepicker({dateFormat: 'dd-mm-yy'}).datepicker('setDate', new Date());
	}else{
		$('.date').datepicker({dateFormat: 'dd-mm-yy'});
	}
	
	history.pushState(null, null, location.href);
		window.onpopstate = function () {
        history.go(1);
    };
	window.oncontextmenu = function () {
		showMsgModel("Error",'Right Click and Input Facilities are disabled for security reason.');
			return false;
		};
		document.onkeydown = function(e) {
		if (e.ctrlKey) {
			showMsgModel("Error",'Right Click and Input Facilities are disabled for security reason.');
			return false;
		};
	}
	$.ajaxSetup({
		headers: {
			'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
		}
	});
	  
	
	$("input , textarea, select").blur(function() {
		if($(this).val() !="") {
			$('#' + $(this).attr('id')).parent('div').find('p').html("");
			$('#' + $(this).attr('id')).parent('div').removeClass('has-error');
			$('#' + $(this).attr('id')).parent('td').removeClass('has-error');
			$('#' + $(this).attr('id')).parent('span').removeClass('has-error');
			$('#' + $(this).attr('id')).parent('div').addClass('has-success');
			$('#' + $(this).attr('id')).parent('td').addClass('has-success');
			$('#' + $(this).attr('id')).parent('span').addClass('has-success');
			$('span[id^='+$(this).attr('id') +']').addClass('hide');
			$('span[id^='+ $(this).attr('id') +']').css("opacity", "0");
			$('div[id^='+ $(this).attr('id') +']').addClass('has-sucess');
			$('div[id^='+ $(this).attr('id') +']').removeClass('has-error');
			if ($(this).prop('type') == 'email'){
				if(!isEmail($(this).val())){
					$('#' + $(this).attr('id')).parent('div').removeClass('has-success');
					$('#' + $(this).attr('id')).parent('div').addClass('has-error');
					$('span[id^='+ $(this).attr('id') +']').css("opacity", "100");
					$('span[id^='+ $(this).attr('id') +']').html('Invalid Email Format');
					$('span[id^='+$(this).attr('id') +']').removeClass('hide');
				}
			}
		}else{
			if($('#' + $(this).attr('id')).hasClass('required')){
				$('#' + $(this).attr('id')).parent('div').removeClass('has-success');
				$('#' + $(this).attr('id')).parent('div').addClass('has-error');
				$('#' + $(this).attr('id')).parent('td').removeClass('has-success');
				$('#' + $(this).attr('id')).parent('td').addClass('has-error');
				$('#' + $(this).attr('id')).parent('span').removeClass('has-success');
				$('#' + $(this).attr('id')).parent('span').addClass('has-error');
				$('span[id^='+$(this).attr('id') +']').removeClass('hide');
				$('span[id^='+ $(this).attr('id') +']').css("opacity", "100");
				$('span[id^='+ $(this).attr('id') +']').html($(this).prop('placeholder')+' Must Required');
				$('div[id^='+ $(this).attr('id') +']').addClass('has-error');
				$('div[id^='+ $(this).attr('id') +']').removeClass('has-success');
			}
		}
	});
	$( document ).ajaxError(function( event, jqxhr, settings, thrownError ) {
	showMsgModel(jqxhr.statusText+' ( '+jqxhr.status+' )',jqxhr.responseText);
	});
	$( document ).ajaxStart(function() {
	 $('body').css({'cursor' : 'wait'});
	}).ajaxComplete(function() {
	   $('body').css({'cursor' : 'default'});
	});
  
	$('.selectpicker').selectpicker({
	  liveSearch: true,
	});
	$('.exmclick').click(function (e) {
		e.preventDefault();
		msg='';
		url='';
		if(checkLiveDate($(this).attr('data-id'))==true){
			if(checkEligibility($(this).attr('data-id'))==true){
				window.history.pushState("", "", url);
				getPage();
				return false;
			}else{
				showMsgModel("Error",msg);
				return false;
			}
		}else{
			showMsgModel("Error",msg);
			return false;
		}
	});
	/* required validation */
	$('form').submit(function(e) {
        e.preventDefault();
		var submitForm=this;
		var input= [];
		var frmReturn =$(this).attr('onsubmit')
		if(frmReturn)return false;
		input = $(this).find(":input");
		$(input).each(function(index ,i) {
			if($(this).attr('name')!="_token"){
				if($('#' + $(this).attr('id')).hasClass('required') && $('#' + $(this).attr('id')).val()==""){
					errorElem.push($(this).attr('id'));
				}
			}
		});
		var sel= [];
		sel = $(this).find(":selected");
		$(sel).each(function(index ,i) {
			if($(this).attr('name')!="_token"){
				if($('#' + $(this).attr('id')).hasClass('required') && $('#' + $(this).attr('id')).val()==""){
					errorElem.push($(this).attr('id'));
				}
			}
		});
        if(errorElem.length > 0){
			errorBlock();
			showMsgModel("This is an warning message!","Please fill the required data to procced Further.")
			return false;
		}else{
			submitForm.submit();
		}
	});
	
	$('select[id^="PayMode_"]').on('change', function(){
		if($(this).val()!=''){
			var myarr = $(this).attr('id').split("_");
			$('.chrgB').val('');
			$('#OFFLINE_CHARGE').val(Base64.encode($('#OFFLINECHARGE_'+myarr[1]).val()));
			$('#NEFT_CHARGE').val(Base64.encode($('#NEFTCHARGE_'+myarr[1]).val()));
			$('#CD_PER').val(Base64.encode($('#CDPER_'+myarr[1]).val()));
			$('#DEBIT_CHARGE').val(Base64.encode($('#DEBITCHARGE_'+myarr[1]).val()));
			$('#NETBANKING_CHARGE').val(Base64.encode($('#NETBANKINGCHARGE_'+myarr[1]).val()));
			$('#NETBANKING_CHARGE_SBI').val(Base64.encode($('#NETBANKINGCHARGESBI_'+myarr[1]).val()));
			$('#NETBANKING_CHARGE_TYPE').val($('#NETBANKINGCHARGETYPE_'+myarr[1]).val());
			$('#CD_CHARGE_TYPE').val($('#CDCHARGETYPE_'+myarr[1]).val());
			$('#NETBANKING_CHARGE_PER').val(Base64.encode($('#NETBANKINGCHARGEPER_'+myarr[1]).val()));
			$('#NETBANKING_CHARGE_SBI_PER').val(Base64.encode($('#NETBANKINGCHARGESBIPER_'+myarr[1]).val()));
			$('#EXAM_TYPE').val($('#examType_'+myarr[1]).val());
			$('#C_ID').val($('#id_'+myarr[1]).val());
			
			var actualamount=0.00;
			$('.PayMode').hide();
			$('#PayMode_'+myarr[1]).show();
			$('#btnSubmit,#ifonlineCharges').html("");
			$('#totalAmount').html("");
			$('#totalTopay').val("");
			$('input[name="pMode"]').prop('checked', false);
			$('#actualAmount').val($('#courseVal_'+myarr[1]).val());
			$("#pModeOffline").prop("disabled", true);
			if($(this).val() !="" && $(this).val() !=0){
				var actualamount=Base64.decode($('#actualAmount').val());
				//alert(actualamount);
				$('#app_fee').html('Rs.' +actualamount);
				var studentCode=Base64.encode($('#STUDENTCODE').val());
				if($(this).val()== "NEFT"){
					$('#ifOffline').show();
					var offlineCharge= Base64.decode($('#NEFT_CHARGE').val()); 
					$('input[name="pMode"]').prop('checked', false);
					$('#paymentOption,#ifOnline').hide();
					$('#ifofflineCharges').html('Rs '+offlineCharge);
					total = parseFloat(actualamount) + parseFloat(offlineCharge);
					$('#totalAmount').html('Rs.'+total);	
					$('#totalTopay').val(total);
					$('#totalTopay').val(Base64.encode($('#totalTopay').val()));
					document.paymentFrm.action= base_url+'student/final-payment?pay_type='+Base64.encode('offline');
					$('#btnSubmit').html('<button type="submit" class="btn btn-warning">Proceed To Pay</button>');
				}else if($(this).val()== "Online"){
					$('#paymentOption').show();
					$('input[name="pMode"]').prop('checked', false);
					$('#totalAmount').html('Rs.'+actualamount);	
					$('#totalTopay').val(Base64.encode(actualamount));
					$('#ifOffline').hide();
					document.paymentFrm.action= base_url+'student/final-payment';
				}else if($(this).val()== "Offline"){
					$('#ifOffline').show();
					var offlineCharge= Base64.decode($('#OFFLINE_CHARGE').val()); 
					$('input[name="pMode"]').prop('checked', false);
					$('#paymentOption,#ifOnline').hide();
					$('#ifofflineCharges').html('Rs '+offlineCharge);
					total = parseFloat(actualamount) + parseFloat(offlineCharge);
					$('#totalAmount').html('Rs.'+total);	
					$('#totalTopay').val(total);
					$('#totalTopay').val(Base64.encode($('#totalTopay').val()));
					document.paymentFrm.action= base_url+'student/offline-challan?exam_type='+$('#EXAM_TYPE').val();
					$('#btnSubmit').html('<button type="submit" class="btn btn-warning">Proceed To Pay</button>');
				}
			}else{
				$('#btnSubmit').html("");
				$('.PayMode').show();
				$('#totalAmount').html('Rs.'+actualamount);	
				$('#totalTopay').val(Base64.encode(actualamount));
				$('input[name="pMode"]').prop('checked', false);
				$('#ifOffline,#paymentOption,#ifOnline').hide();
				$('#app_fee').html('Rs.' +actualamount);
			}
		}else{
			$('.chrgB').val('');
			$('.PayMode').show();
			$('#btnSubmit,#ifonlineCharges').html("");
			$('#totalAmount').html("");
			$('#totalTopay').val("");
			$('input[name="pMode"]').prop('checked', false);
			$('#actualAmount').val('');
			$("#pModeOffline").prop("disabled", true);
		}
	});
	
	$('input[name="pMode"]').on('change', function() {
		var netbankcharge= 0;
		var onlineCharge=0;
		var total=	0;	
		$('#onlineCharge').val(0);
		var actualamount=Base64.decode($('#actualAmount').val());
		if(parseFloat(actualamount)==0){
			showMsgModel("Warning",'Sorry Fee Should Not be 0 . Something went wrong please try to fill fresh form by delete this.');
			return false;
		}
		if($('input[name=pMode]:checked').val() == '1' || $('input[name=pMode]:checked').val() == '2'){
			$('#ifOnline').show();
			var cdPER=Base64.decode($('#CD_PER').val());
			var cd_label='Credit';
			if($('input[name=pMode]:checked').val() == '2'){
				cdPER=Base64.decode($('#DEBIT_CHARGE').val());
				cd_label='Debit';
			}
			console.log('cdper '+cdPER);
			$('#onlineCharge').val(onlineCharge);
			if($('#CD_CHARGE_TYPE').val ()== "PA"){
				total = parseFloat(actualamount) / parseFloat(1 - cdPER / 100 );
				//total = (parseFloat(actualamount) * parseFloat(cdPER)/ 100) + parseFloat(actualamount);
				console.log('total'+total);
				rr=parseFloat(total)-parseFloat(actualamount);
				console.log('rr'+rr);
				rr=parseFloat(rr).toFixed(2);
				$('#onlineChargeType').html(cd_label+' Card : '+cdPER+ '% of the fees (Includes 18% GST)');
				$('#ifonlineCharges').html('Rs.' +rr);
				total=parseFloat(total).toFixed(2);
			}else if($('#CD_CHARGE_TYPE').val() == "FA"){
				$('#onlineChargeType').html(cd_label+' Card chrages Fixed : '+cdPER+ 'Fixed (Includes 18% GST)');
				rr=parseFloat(cdPER)+parseFloat(actualamount);
				rr=parseFloat(rr).toFixed(2);
				$('#ifonlineCharges').html('Rs.' +cdPER);
				total=rr;
			}
			$('#totalAmount').html('Rs.'+total);	
			$('#totalTopay').val(Base64.encode(total));
			$('#btnSubmit').html('<button type="submit" class="btn btn-warning">Proceed To Pay</button>');
		}else if($('input[name=pMode]:checked').val() == '3'){
			$('#ifOnline').show();
			var netbankcharge= Base64.decode($('#NETBANKING_CHARGE_SBI').val());
			if($('#NETBANKING_CHARGE_TYPE').val ()== "PA"){
				$('#onlineChargeType').html('SBI Net Banking (Includes 18% GST) : '+netbankcharge+ '%');
				onlineCharge= parseFloat(actualamount ) / parseFloat(1 - netbankcharge / 100 );
				//onlineCharge= (parseFloat(actualamount ) * parseFloat(netbankcharge) /100)+ parseFloat(actualamount) ;
				onlineCharge= parseFloat( onlineCharge).toFixed(2);
			}else if($('#NETBANKING_CHARGE_TYPE').val() == "FA"){
				$('#onlineChargeType').html('SBI Net Banking (Includes 18% GST) : Rs.'+netbankcharge);
				onlineCharge= parseFloat(netbankcharge).toFixed(2);
			}
			
			$('#ifonlineCharges').html('Rs.' +onlineCharge);
			$('#onlineCharge').val(onlineCharge);
			total = parseFloat(actualamount) + parseFloat(onlineCharge);
			total=	parseFloat(total).toFixed(2);
			$('#totalAmount').html('Rs.'+total);	
			$('#totalTopay').val(Base64.encode(total));
			$('#btnSubmit').html('<button type="submit" class="btn btn-warning">Proceed To Pay</button>');
		}else if($('input[name=pMode]:checked').val() == '4'){
			$('#ifOnline').show();
			var netbankcharge= Base64.decode($('#NETBANKING_CHARGE').val());
			if($('#NETBANKING_CHARGE_TYPE').val ()== "PA"){
				$('#onlineChargeType').html('Net Banking on Other (Includes 18% GST) : '+netbankcharge+ '%');
				onlineCharge= parseFloat(actualamount ) / parseFloat(1 - netbankcharge / 100 );
				//onlineCharge= (parseFloat(actualamount ) * parseFloat(netbankcharge) / 100)+ parseFloat(actualamount) ;
				onlineCharge= parseFloat( onlineCharge).toFixed(2);
			}else if($('#NETBANKING_CHARGE_TYPE').val() == "FA"){
				$('#onlineChargeType').html('Net Banking on Other (Includes 18% GST) : Rs.'+netbankcharge);
				console.log(actualamount);
				onlineCharge= parseFloat( netbankcharge).toFixed(2);
			}
			$('#onlineCharge').val(onlineCharge);
			$('#ifonlineCharges').html('Rs.' +onlineCharge);
			total = parseFloat(actualamount) + parseFloat(onlineCharge);
			
			$('#totalAmount').html('Rs.'+total);	
			$('#totalTopay').val(total);
			$('#totalTopay').val(Base64.encode($('#totalTopay').val()));
			$('#btnSubmit').html('<button type="submit" class="btn btn-warning">Proceed To Pay</button>');
		}else{
			$('#btnSubmit').html('');
			$('#onlineCharge').val(0);
		}
	});
	
	$("input[id='imgFile']").on('change', function(){
		var file, img;
		if ((file = this.files[0])) {
			id= $(this).attr('id').substring(10);
			img = new Image();
			var sizeKB = file.size;
			var ext = file.name.split('.').pop().toLowerCase();
			var extcate = ["jpg", "jpeg", "JPG", "JPEG","png","PNG"];
			var found = $.inArray(ext, extcate);
			img.onload = function() {
				if((this.width < 200 || this.height < 250)){
					$('#errorModelLabel').html('<span>Error</span>');
					$(this).val('') ;
					showMsgModel("This is an warning message!",'Please Upload the Photo Having Minimum width 200px and Minimum height of 250px.');
					return false;
				}else if(this.height < this.width && $("#uid").val()=="0"){
					$(this).val('') ;
					showMsgModel("This is an warning message!",'Width Of Photo Should Not Be Greater Then Height.');
					return false;
				}else{
					if (found == -1) {
						$(this).val('') ;
						showMsgModel("This is an warning message!",'Only These Image Formats Are Allowed (jpeg , jpg)');
					}else if (found != -1) {
						if(sizeKB > 204800){
							$(this).val('') ;
							showMsgModel("This is an warning message!",'Your Upload File is more than 200KB .');
						}else{
							var form = $('form#pic').get(0); 
							picOnsubmit(form,'upload_photo_save','p1','imgFile');
						}
					}
			   }
			};
			img.src = _URL_.createObjectURL(file);
		}
	});
	$("input[id='signFile']").on('change', function(){
		var file, img;
		if ((file = this.files[0])) {
			id= $(this).attr('id').substring(10);
			img = new Image();
			var sizeKB = file.size;
			var ext = file.name.split('.').pop().toLowerCase();
			var extcate = ["jpg", "jpeg", "JPG", "JPEG"];
			var found = $.inArray(ext, extcate);
			img.onload = function() {
				if((this.width < 300 || this.height < 100)){
					showMsgModel("This is an warning message!",'Please Upload the Hindi Signature Having Minimum width 300px and Minimum height of 100px.');
					$(this).val('') ;
					return false;
				}else if(this.height > this.width && $("#uid").val()=="0"){
					$(this).val('') ;
					showMsgModel("This is an warning message!",'Width Should not be less then height.');
					return false;
				}else{
					if (found == -1) {
						$(this).val('') ;
						showMsgModel("This is an warning message!",'Only These Image Formats Are Allowed (jpeg,jpg)');
					}else if (found != -1) {
						if(sizeKB > 204800){
							$(this).val('') ;
							showMsgModel("This is an warning message!",'Your Upload File is more than 200KB .');
						}else{
							var form = $('form#sign').get(0); 
							picOnsubmit(form,'upload_sign_save','p2','signFile');
						}
					}
			   }
			};
			img.src = _URL_.createObjectURL(file);
		}
	});
	/*Documant File Size and Type Checking */
	$("input[id^='DocumentUp_']").on('change', function(){
		if ((file = this.files[0])) {
			var myarr = $(this).attr('id').split("_");
			id= $(this).attr('id').substring(10);
			img = new Image();
			var sizeKB = file.size;
			var ext = file.name.split('.').pop().toLowerCase();
			var extcate = ["jpg", "png", "bmp", "jpeg", "JPG", "PNG", "BMP", "JPEG",'pdf','PDF'];
			var found = $.inArray(ext, extcate);
			if (found == -1) {
				$(this).val('') ;
				showMsgModel("","Invalid Format Only jpeg,jpg,pdf Format accepted.")
			}else if (found != -1) {
				if(sizeKB > $('#MAX_FILE_SIZE'+id).val()){
					$('imageExceded').val("y");
					vv= "'"+$(this).attr('id')+"'";
					var msg='Your Upload File is more than 200KB . Do you want to add another file Click here <a onClick="newImageUploadSelected('+vv+')" href="javascript:void(0)" class="btn btn-success">Yes</a> <br>';
					if(ext.toUpperCase()!='PDF' && ext!="pdf"){
						msg +='<br>Or For Auto Resize Press here <a onClick="newImageUploadContinue('+id+')" href="javascript:void(0)" class="btn btn-warning">Continue</a>  <br><br><div class="alert alert-warning">Auto Resize May Affect Your Document. </div>';
					}
					showMsgModel("",msg)
				}
				$('#selectFileName_'+myarr[1]).html("<blockquote><i class='fa fa-check' style='color: #00acac;'></i>  "+file.name+"</blockquote>");
			}
			//img.src = _URL_.createObjectURL(file);
		}
        
    });
	$('input[id^="resultAw"]').on('change', function(){
		if($('input[id='+$(this).attr('id')+']:checked').val() == 'y'){
			var selectID= $(this).attr('id');
			centerData = $('form#acdemic_details').find("input[id^='resultAw']");
			$(centerData).each(function(index ,i) {
				if(selectID == $(i).attr('id')){
					var myarr = $(i).attr('id').split("_");
					$('#va'+myarr[1]).val('n');
					$('input[id^="subobtainMarks_'+myarr[1]+'_"]').each(function(index ,i) {
						$('#'+$(this).attr('id')).parent().parent().parent().addClass("hide");
						$('#'+$(this).attr('id')).val('');
					});
					$('input[id^="subtotalMark_'+myarr[1]+'_"]').each(function(index ,i) {
						$('#'+$(this).attr('id')).val('');
					});
					$('#MARKS'+myarr[1]).val("");
					$('#MARKS'+myarr[1]).prop("readonly",true);
					$('#YEAR'+myarr[1]).prop("readonly",true);
					$('#MARKSTOTAL'+myarr[1]).val("");
					$('#MARKSTOTAL'+myarr[1]).prop("readonly",true);
					$('#MARKSPER'+myarr[1]).val("");
					$('#MARKSPER'+myarr[1]).prop("readonly",true);
					$('#CGPA'+myarr[1]).val("");
					$('#CGPA'+myarr[1]).prop("readonly",true);
					$('#ROLL'+myarr[1]).val("");
					$('#ROLL'+myarr[1]).prop("readonly",true);
					if(!$("#YEAR"+myarr[1]+" option[value='2018']").length){
						$('#YEAR'+myarr[1]).prepend("<option value='2018'>2018</option>");
					}
					if($("#YEAR"+myarr[1]+" option[value='']").length){
						$("#YEAR"+myarr[1]+" option[value='']").remove();
					}
					$('#YEAR'+myarr[1]).val("2018");
					$('#CGPA_PER_TYPE_'+myarr[1]).attr('disabled',true);
					$($('#YEAR'+myarr[1]).find('option')).each(function(){
						if($(this).val()!='2018')
							$(this).addClass('hide');
					});
				}else{
					var myarr = $(i).attr('id').split("_");
					$('#va'+myarr[1]).val($('#va_2_'+myarr[1]).val());
					$('#'+$(i).attr('id')).prop('checked',false);
					$('#YEAR'+myarr[1]).find('option[value=2018]').remove();
					
				}
			});
		}else{
			var myarr = $(this).attr('id').split("_");
			var cv = $('#subobtainMarks_'+myarr[1]+'_1').val();
			$('#va'+myarr[1]).val($('#va_2_'+myarr[1]).val());
			if(!!cv){
				$('#MARKS'+myarr[1]).prop("readonly",false);
				$('#MARKSTOTAL'+myarr[1]).prop("readonly",false);
				$('#MARKSPER'+myarr[1]).prop("readonly",false);
			}
			$('#CGPA'+myarr[1]).prop("readonly",false);
			$('#ROLL'+myarr[1]).prop("readonly",false);
			$('#YEAR'+myarr[1]).prop("readonly",false);
			$('#CGPA_PER_TYPE_'+myarr[1]).attr('disabled',false);
			
			$('#YEAR'+myarr[1]).find('option[value=2018]').remove();
			
			if($("#YEAR"+myarr[1]+" option[value='']").length==0){
				$('#YEAR'+myarr[1]).prepend("<option value=''>select</option>");
				$('#YEAR'+myarr[1]).val(''); 
			}
			$('input[id^="subobtainMarks_'+myarr[1]+'_"]').parent().parent().parent().removeClass("hide");
			$('input[id^="subtotalMark_'+myarr[1]+'_"]').parent().parent().parent().removeClass("hide");
			$('#MARKS'+myarr[1]).removeAttr('readonly');
			$('#MARKSTOTAL'+myarr[1]).removeAttr('readonly');
			$($('#YEAR'+myarr[1]).find('option')).each(function(){
				$(this).removeClass('hide');
			});
		}
	});
	
	/*Adding Js for Academic Details*/
	$('input[id^="subobtainMarks_"]').blur(function() {
		var myarr = $(this).attr('id').split("_");
		if($('#subtotalMark_'+myarr[1]+'_'+myarr[2]).val() !=""){
			showMsgModel("","Marks Obtained should Not be Greater Than Total Mark.");
			$(this).val("");
			$('#subtotalMark_'+myarr[1]+'_'+myarr[2]).val("");
		}else{
			$('#MARKSPER'+myarr[1]).val("");
		}
		var markObtain = 0;
		var markTotal=0;
		for(var i = 0; i < $( "input[id^='subobtainMarks_"+myarr[1]+"']" ).length; ++i){
			var rr=$( "input[id^='subobtainMarks_"+myarr[1]+"']" )[i].value;
			if(rr ==""){rr=0;}
			markObtain += parseInt(rr);
		}
		for(var i = 0; i < $( "input[id^='subtotalMark_"+myarr[1]+"']" ).length; ++i){
			var rr=$( "input[id^='subtotalMark_"+myarr[1]+"']" )[i].value;
			if(rr ==""){rr=0;}
			markTotal += parseInt(rr);
		}
		$('#MARKS'+myarr[1]).val(parseInt(markObtain));	
		$('#MARKSTOTAL'+myarr[1]).val(parseInt(markTotal));
		var devider = (parseInt(markObtain ) /parseInt( markTotal))*100;
		$('#MARKSPER'+myarr[1]).val(Math.round(devider*100)/100);
		getWeightageValue(myarr[1]);
	});
	$('input[id^="subtotalMark_"]').blur(function() {
		var myarr = $(this).attr('id').split("_");
		if($('#subobtainMarks_'+myarr[1]+'_'+myarr[2]).val() !=""){
			if(parseInt($(this).val()) < parseInt($('#subobtainMarks_'+myarr[1]+'_'+myarr[2]).val())){
				showMsgModel("","Marks Obtain should Not be Greater Than Total Mark.");
				$('#errorModelMsg').html(' ');	
				$('#errorModel').modal('show');
				$(this).val("");
				$('#subobtainMarks_'+myarr[1]+'_'+myarr[2]).val("");
			}
		}else{
			$('#MARKSPER'+myarr[1]).val("");
		}
		var markObtain = 0;
		var markTotal=0;
		for(var i = 0; i < $( "input[id^='subobtainMarks_"+myarr[1]+"']" ).length; ++i){
			var rr=$( "input[id^='subobtainMarks_"+myarr[1]+"']" )[i].value;
			if(rr ==""){rr=0;}
			markObtain += parseInt(rr);
		}
		for(var i = 0; i < $( "input[id^='subtotalMark_"+myarr[1]+"']" ).length; ++i){
			var rr=$( "input[id^='subtotalMark_"+myarr[1]+"']" )[i].value;
			if(rr ==""){rr=0;}
			markTotal += parseInt(rr);
		}
		$('#MARKS'+myarr[1]).val(parseInt(markObtain));	
		$('#MARKSTOTAL'+myarr[1]).val(parseInt(markTotal));
		var devider = (parseInt(markObtain ) /parseInt( markTotal))*100;
		$('#MARKSPER'+myarr[1]).val(Math.round(devider*100)/100);
		getWeightageValue(myarr[1]);
	});
	$('input[id^="yearSemMarks_"]').blur(function() {
		var myarr = $(this).attr('id').split("_");
		if($('#yearSemtotalMark_'+myarr[1]+'_'+myarr[2]).val() !=""){
			if(parseInt($(this).val()) > parseInt($('#yearSemtotalMark_'+myarr[1]+'_'+myarr[2]).val())){
				showMsgModel("","Marks Obtain should Not be Greater Than Total Mark.");
				$(this).val("");
				$('#yearSemtotalMark_'+myarr[1]+'_'+myarr[2]).val("");
			}
			var markObtain = 0;
			var markTotal=0;
			for(var i = 0; i < $( "input[id^='yearSemMarks_"+myarr[1]+"']" ).length; ++i){
				var rr=$( "input[id^='yearSemMarks_"+myarr[1]+"']" )[i].value;
				if(rr ==""){rr=0;}
				markObtain += parseInt(rr);
			}
			for(var i = 0; i < $( "input[id^='yearSemtotalMark_"+myarr[1]+"']" ).length; ++i){
				var rr=$( "input[id^='yearSemtotalMark_"+myarr[1]+"']" )[i].value;
				if(rr ==""){rr=0;}
				markTotal += parseInt(rr);
			}
			$('#MARKS'+myarr[1]).val(parseInt(markObtain));	
			$('#MARKSTOTAL'+myarr[1]).val(parseInt(markTotal));
			var devider = (parseInt(markObtain ) /parseInt( markTotal))*100;
			$('#MARKSPER'+myarr[1]).val(Math.round(devider*100)/100);
			getWeightageValue(myarr[1]);
		}else{
			$('#MARKSPER'+myarr[1]).val("");
		}
	});
	$('input[id^="yearSemtotalMark_"]').blur(function() {
		var myarr = $(this).attr('id').split("_");
		if($('#yearSemMarks_'+myarr[1]+'_'+myarr[2]).val() !=""){
			if(parseInt($(this).val()) < parseInt($('#yearSemMarks_'+myarr[1]+'_'+myarr[2]).val())){
				showMsgModel("","Marks Obtain should Not be Greater Than Total Mark.");
				$(this).val("");
				$('#yearSemMarks_'+myarr[1]+'_'+myarr[2]).val("");
			}
		}else{
			$('#MARKSPER'+myarr[1]).val("");
		}	
		var markObtain = 0;
		var markTotal=0;
		for(var i = 0; i < $( "input[id^='yearSemMarks_"+myarr[1]+"']" ).length; ++i){
			var rr=$( "input[id^='yearSemMarks_"+myarr[1]+"']" )[i].value;
			if(rr ==""){rr=0;}
			markObtain += parseInt(rr);
		}
		for(var i = 0; i < $( "input[id^='yearSemtotalMark_"+myarr[1]+"']" ).length; ++i){
			var rr=$( "input[id^='yearSemtotalMark_"+myarr[1]+"']" )[i].value;
			if(rr ==""){rr=0;}
			markTotal += parseInt(rr);
		}
		$('#MARKS'+myarr[1]).val(parseInt(markObtain));	
		$('#MARKSTOTAL'+myarr[1]).val(parseInt(markTotal));
		var devider = (parseInt(markObtain ) /parseInt( markTotal))*100;
		$('#MARKSPER'+myarr[1]).val(Math.round(devider*100)/100);
		getWeightageValue(myarr[1]);
	});
	
	$('select[id^="YEAR_SEM"]').on('change', function(){
		id=$(this).attr('id').slice(8);
		if($(this).val()=="Semester Wise Course"){
			$('#divSemesterUG'+id).show();
			$('#yearSemtotalMark_'+id+'_4,#yearSemtotalMark_'+id+'_3').parent('td').parent('tr').show();
			$('.ys'+id).html("semesters");
			$('#NO_OF_SEM_'+id).val("4");
			$('input[id^="yearSemtotalMark_'+id+'"]').blur();
			$('input[id^="yearSemMarks_'+id+'"]').blur();
		}else{
			$('.ys'+id).html("Year");
			$('input[id^="yearSemtotalMark_'+id+'"]').parent('td').parent('tr').show();
			$('#yearSemtotalMark_'+id+'_4').parent('td').parent('tr').hide();
			$('#YEARSEMROLL_'+id+'_4,#yearSemMarks_'+id+'_4,#yearSemtotalMark_'+id+'_4').val("");
			var vv = $('#view'+id).val();
			for(var i = vv; i < 11; ++i){
				$('#YEARSEMROLL_'+id+'_'+i+',#yearSemMarks_'+id+'_'+i+',#yearSemtotalMark_'+id+'_'+i+',#YEARSEMROLL_'+id+'_'+i).val("");
				$('#yearSemtotalMark_'+id+'_'+i).parent('td').parent('tr').hide();
			}
			$('input[id^="yearSemtotalMark_'+id+'"]').blur();
			$('input[id^="yearSemMarks_'+id+'"]').blur();
			$('#divSemesterUG'+id).hide();
		}
	});
	$('select[id^="NO_OF_SEM_"]').on('change', function(){
		id=$(this).attr('id').slice(10);
		console.log($(this).attr('id'));  console.log(id);
		var noSem= $(this).val();
		++noSem;
		for(var i = 1; i < 11; ++i){
			$('#yearSemtotalMark_'+id+'_'+i).parent('td').parent('tr').hide();
		}
		for(var i = 1; i < noSem; ++i){
			$('#yearSemtotalMark_'+id+'_'+i).parent('td').parent('tr').show();
		}
		for(var i = noSem;  i < 11; ++i){
			$('#YEARSEMROLL_'+id+'_'+i+',#yearSemMarks_'+id+'_'+i+',#yearSemtotalMark_'+id+'_'+i+',#YEARSEMROLL_'+id+'_'+i).val("");
		}
		$('input[id^="yearSemtotalMark_'+id+'"]').blur();
		$('input[id^="yearSemMarks_'+id+'"]').blur();
	});
	/*Ending for Academic Details*/
	
	
	$('.dataBxPad').removeClass('hide');
	if(routeUrl=="subject-selection"){
		getPaperGroup(); 
	}
    if(routeUrl=="subject-selection-cbcs"){
		getPaperGroupCbcs(); 
	}

	if(subdomain=="sgbau"){
		$('select[id="OLDSTUDENT_ENROLLMENT_NUMBER"]').on('change', function(){
			$('#FGR_GURDIANSRES_EMAIL_ID').hide();
			$('#GURDIANSRES_EMAIL_ID').removeClass('required');
		
			if($(this).val()=="101"){
				$('#FGR_GURDIANSRES_EMAIL_ID').show();
				$('#GURDIANSRES_EMAIL_ID').val("");
				$('#GURDIANSRES_EMAIL_ID').addClass('required');
			}
		});
		$('select[id="STUDENT_STATE_OF_DOMICILE"]').on('change', function(){
			$('#FGR_MOTHERSRES_MOBILE').hide();
			$('#MOTHERSRES_MOBILE').removeClass('required');
			$('#FGR_FATHERSRES_LAND_LINE').hide();
			$('#FATHERSRES_LAND_LINE').removeClass('required');
			$('#FGR_FATHERSRES_POSTOFFICE').hide();
			$('#FATHERSRES_POSTOFFICE').removeClass('required');
			if($(this).val()=="102"){
				$('#FGR_MOTHERSRES_MOBILE').show();
				$('#MOTHERSRES_MOBILE').val("");
				$('#MOTHERSRES_MOBILE').addClass('required');
				$('#FGR_FATHERSRES_LAND_LINE').show();
				$('#FATHERSRES_LAND_LINE').val("");
			    $('#FATHERSRES_LAND_LINE').addClass('required');
				$('#FGR_FATHERSRES_POSTOFFICE').show();
				$('#FATHERSRES_POSTOFFICE').val("");
			    $('#FATHERSRES_POSTOFFICE').addClass('required');
			}else{
				$('#MOTHERSRES_MOBILE').val("");
				$('#FATHERSRES_LAND_LINE').val("");
				$('#FATHERSRES_POSTOFFICE').val("");
			}
		});
		$('select[id="QUALIFICATIONOFFATHER"]').on('change', function(){
			$('#FGR_FATHERSRES_LAND_LINE').hide();
			$('#FATHERSRES_LAND_LINE').removeClass('required');
			if($(this).val()=="101"){
				$('#FGR_FATHERSRES_LAND_LINE').show();
				$('#FATHERSRES_LAND_LINE').val("");
			    $('#FATHERSRES_LAND_LINE').addClass('required');
			}else{
				$('#FATHERSRES_LAND_LINE').val("");	
			}
		});
		
		$('select[id="STUDENT_PHYSICAL_CHALLANGED"]').on('change', function(){
			$('#FGR_MOTHERSRES_LAND_LINE').hide();
			$('#MOTHERSRES_LAND_LINE').removeClass('required');
			if($(this).val()=="101"){
				$('#FGR_MOTHERSRES_LAND_LINE').show();
				$('#MOTHERSRES_LAND_LINE').val("");
				$('#MOTHERSRES_LAND_LINE').addClass('required'); 
			}
		});
		
	}
	if(subdomain=="cug1"){ 
		$('select[id="STUDENT_ADDHARCARD"]').on('change', function(){
			$('#FGR_STUDENTVOTERID').hide();
			$('#STUDENTVOTERID').removeClass('required');
			if($(this).val()!=""){
				$('#FGR_STUDENTVOTERID').show();
				$('#STUDENTVOTERID').addClass('required');
			}
		});
		$('select[id="STUDENT_PHYSICAL_CHALLANGED"]').on('change', function(){			
			$('#FGR_DISABLITY_TYPE').hide();			
			$('#FGR_DISABLITY_PERCENTAGE').hide();			
			$('#DISABLITY_TYPE').removeClass('required');
			if($(this).val()=="101"){
				$('#FGR_DISABLITY_TYPE').show();				
				$('#DISABLITY_TYPE').val("");
				$('#DISABLITY_TYPE').addClass('required');
				$('#FGR_DISABLITY_PERCENTAGE').show();				
				$('#DISABLITY_PERCENTAGE').val("");
				$('#DISABLITY_PERCENTAGE').addClass('required'); 
			}  
		});
		$('select[id="BELONGSTO"]').on('change', function(){			
			$('#FGR_BELONGSTO1').hide();								
			$('#BELONGSTO1').removeClass('required');
			if($(this).val()=="101"){
				$('#FGR_BELONGSTO1').show(); 				
				$('#BELONGSTO1').val("");
				$('#BELONGSTO1').addClass('required');  
			}  
		});
		$('select[id="FATHERSRES_EMAIL_ID"]').on('change', function(){			
			$('#FGR_FATHERSRES_ZIP').hide();								
			$('#FATHERSRES_ZIP').removeClass('required');
			$('#FGR_FATHERSRES_POSTOFFICE').hide();								
			$('#FATHERSRES_POSTOFFICE').removeClass('required');
			$('#FGR_PATHERSRES_PS').hide();								
			$('#PATHERSRES_PS').removeClass('required');
			if($(this).val()=="101"){
				$('#FGR_FATHERSRES_ZIP').show(); 
				$('#FATHERSRES_ZIP').val("");
				$('#FATHERSRES_ZIP').addClass('required');
				$('#FGR_FATHERSRES_POSTOFFICE').show(); 
				$('#FATHERSRES_POSTOFFICE').val("");
				$('#FATHERSRES_POSTOFFICE').addClass('required');
				$('#FGR_PATHERSRES_PS').show(); 
				$('#PATHERSRES_PS').val("");
				$('#PATHERSRES_PS').addClass('required');				
			}  
		});
		
	}else if(subdomain=="igu"){
		$('#FATHERSRES_EMAIL_ID').attr("type",'email');
	}

	
});
newImageUploadContinue = function (id){
	$('#resize'+id).val("Y");
	$('#MAX_FILE_SIZE'+id).val("");
	$('.modal').modal('hide');
}
popUp = function(id){
	$('#errorModelLabel').html('<span>Document File</span>');
	$('#errorModelMsg').html($('#imgRR'+id).html());	
	$('#errorModel').modal('show');
}
picOnsubmit=function(thisDat,urt,p1,imgFile){
	if($('#'+imgFile).val()==""){
		showMsgModel("This is an warning message!",'Please select a Image!');
		return false;
	}
	$.ajax({
		url: base_url+"student/"+urt,
		type: "POST",             
		data: new FormData(thisDat), 
		contentType: false,      
		cache: false,             
		processData:false,
		async:false,
		beforeSend: function(){	
			$('#'+p1).show();
			var percentVal = '50%';
			$('#pBar').css('width',(percentVal));
			$('#percent').html(percentVal);
			$('#pBar').addClass('progress-bar-success');
		},					
		success: function(data){
			$('#'+p1).hide();
			if(data.status == true){
				var percentVal = '100%';
				$('#pBar').css('width',(percentVal));
				$('#percent').html(percentVal);
				$('#navbar').find(".active").find('a').click();
			}else if(data.status='error'){
				var errorString = '<ul style="padding-left: 20px;">';
				$.each( data.errorMsg, function( key, value) {
					$.each( value, function( key1, value2) {
						errorString += '<li>' + value + '</li>';
					});
					
				});
				errorString += '</ul>';
				showMsgModel("",errorString);
				return false;
			}else{
				showMsgModel("",data.msg);
				var percentVal = '50%';
				$('#pBar').css('width',(percentVal));
				$('#pBar').addClass('progress-bar-success');
				$('#percent').html(percentVal);
			}
			
		}
	});
};
getWeightageValue = function(id){
	if($('#WEIGHTAGE'+id).length){
		$.getScript('../public/js/weightage.js', function(){
			weghtage(id);
		});
	}
	
}
checkAcademicDetails = function (){
	var reQarray="";
	$($('#markData').find("input[id^='yearSemtotalMark_']")).each(function(index ,i) {
		var myarr = $(this).attr('id').split("_");
		if($('#yearSemMarks_'+myarr[1]+'_'+myarr[2]).val() == "" && $('#yearSemtotalMark_'+myarr[1]+'_'+myarr[2]).val() !="" ){
			errorElem.push($('#yearSemMarks_'+myarr[1]+'_'+myarr[2]).attr('id'));
			reQarray+= $(this).attr('id')+",";
		}
		if($('#yearSemMarks_'+myarr[1]+'_'+myarr[2]).val() != "" && $('#yearSemtotalMark_'+myarr[1]+'_'+myarr[2]).val() =="" ){
			errorElem.push($('#yearSemtotalMark_'+myarr[1]+'_'+myarr[2]).attr('id'));
			reQarray+= $(this).attr('id')+",";
		}
	});
	$($('#markData').find("input[id^='subtotalMark_']")).each(function(index ,i) {
		var myarr = $(this).attr('id').split("_");
		if($('#subtotalMark_'+myarr[1]+'_'+myarr[2]).val() == "" && $('#subobtainMarks_'+myarr[1]+'_'+myarr[2]).val() !="" ){
			errorElem.push($('#subtotalMark_'+myarr[1]+'_'+myarr[2]).attr('id'));
			reQarray+= $(this).attr('id')+",";
		}
		if($('#subobtainMarks_'+myarr[1]+'_'+myarr[2]).val() != "" && $('#subtotalMark_'+myarr[1]+'_'+myarr[2]).val() ==""){
			errorElem.push($('#subtotalMark_'+myarr[1]+'_'+myarr[2]).attr('id'));
			reQarray+= $(this).attr('id')+",";
		}
	});
	var id=""
	$($('#markData').find("input[id^='MARKS']")).each(function(index ,i) {
		id=$(this).attr('id').slice(5);
		if($('#va'+id).val()== "y"){
				if($(this).val() == "" || $(this).val==0){
					if($('#PREAD'+id).val()== "Y"){
						errorElem.push($(this).attr('id'));
						reQarray+= $(this).attr('id')+",";
					}
				}	
			
			if($('#DIVISION'+id).val() == ""){
				errorElem.push('DIVISION'+id);
				reQarray+= $(this).attr('id')+",";
			}
			if($('#DIVISION'+id).val()=='101'){
				if($('#CGPA_PER_TYPE_'+id).val() == ""){
					errorElem.push('CGPA_PER_TYPE_'+id);
					reQarray+= $(this).attr('id')+",";
				}
				$($('#markData').find("input[id^='subobtainMarks_"+id+"']")).each(function(index ,i) {
					if($(this).val() == ""){
						errorElem.push($(this).attr('id'));
						reQarray+= $(this).attr('id')+",";
					}
				});
				$($('#markData').find("input[id^='subtotalMark_"+id+"']")).each(function(index ,i) {
					if($(this).val() == ""){
						errorElem.push($(this).attr('id'));
						reQarray+= $(this).attr('id')+",";
					}
				});
				if($('#PREAD'+id).val()== "Y"){
					if(parseFloat($('#MARKSTOTAL'+id).val()) =="" || parseFloat($('#MARKSTOTAL'+id).val())== 0 && $('#CGPA_PER_TYPE_'+id).val() == "per"){
						errorElem.push('MARKSTOTAL'+id);
						reQarray+= $(this).attr('id')+",";
					}
					if(parseFloat($('#MARKS'+id).val()) =="" || parseFloat($('#MARKS'+id).val())== 0 && $('#CGPA_PER_TYPE_'+id).val() == "per"){
						errorElem.push('MARKS'+id);
						reQarray+= $(this).attr('id')+",";
					}
				}
				
				if($('#CGPA_PERCENTAGE_REQUIRED'+id).val()=='Y'){
					if($("#MARKSPER"+id).val() =="" && $("#CGPA"+id).val() ==""){
						errorElem.push('MARKSPER'+id);
						errorElem.push('CGPA'+id);
						reQarray+= $(this).attr('id')+",";
					}
				}else{
					if($("#MARKSPER"+id).val() =="" && $('#CGPA_PER_TYPE_'+id).val() == "per"){
						errorElem.push('MARKSPER'+id);
						reQarray+= $(this).attr('id')+",";
					}
				}
				if($("#ROLL"+id).val() ==""){
					errorElem.push('ROLL'+id);
					reQarray+= $(this).attr('id')+",";
				}
				if($('#CGPAREQUIRED'+id).val()== "Y" && $('#CGPA_PER_TYPE_'+id).val() == "cgpa"){
					if($("#CGPA"+id).val() ==""){
						errorElem.push('CGPA'+id);
						reQarray+= $(this).attr('id')+",";
					}
				}
			}
			if($('#SUBJECT'+id).val() == ""){
				errorElem.push('SUBJECT'+id);
				reQarray+= $(this).attr('id')+",";
			}
			if(subdomain=="cug1"){
				$('#resultD').addClass('hide');
			}
			if($('#SUBJECTS'+id).val() == ""){
				errorElem.push('SUBJECTS'+id);
				reQarray+= $(this).attr('id')+",";
			}
			if($('#YEAR'+id).val() == "" || $('#YEAR'+id).val()== 0){
				errorElem.push('YEAR'+id);
				reQarray+= $(this).attr('id')+",";
			}
			if($("#UNIVER"+id).val() =="" || $("#UNIVER"+id).val()==0){
				errorElem.push('UNIVER'+id);
				reQarray+= $(this).attr('id')+",";
			}else{
				if($("#UNIVER"+id).val() =="OTHER" && $('#UNIVER_OTHER'+id).val() == ""){
					errorElem.push('UNIVER_OTHER'+id);
					reQarray+= $(this).attr('id')+",";
				}
			}
		}
		if($('input[id=resultAw_'+id+']:checked').val()=='y'){
			if($("#UNIVER"+id).val() =="" || $("#UNIVER"+id).val()==0){
				errorElem.push('UNIVER'+id);
				reQarray+= $(this).attr('id')+",";
			}else{
				if($("#UNIVER"+id).val() =="OTHER" && $('#UNIVER_OTHER'+id).val() == ""){
					errorElem.push('UNIVER_OTHER'+id);
					reQarray+= $(this).attr('id')+",";
				}
			}
		}
		if(parseFloat($('#MARKS'+id).val()) > parseFloat($('#MARKSTOTAL'+id).val())){
			errorElem.push("MARKS"+id);errorElem.push("MARKSTOTAL"+id);
			reQarray+= $(this).attr('id')+",";
			showMsgModel("","Marks Obtain Should Not be More than Marks Total!.");
			return false;
		}
		
	});
	console.log(errorElem);
	if(errorElem.length > 0){
		$('#markData').find('.help-block').html("");
		errorBlock();
		showMsgModel("",'You have left some mandatory fields blank in this section. They are marked in "RED" for your convenience. Please enter the required data to save and proceed further.');	
		return false;
	}else{
		/*Checking Elegibilty*/
		$.ajax({
			type: "POST",
			url: base_url+"student/check_academic_elegibilty",
			data: $('form#acdemic_details').serialize(),	
			dataType:'json',
			beforeSend: function(){	
				$('.preloader').removeClass('hide');
			},
			success:function(data){	
				if(data.status == false){
					var errorString = '<ul style="padding-left: 20px;">';
					$.each( data.msg, function( key, value) {
						errorString += '<li>' + value + '</li>';
					});
					errorString += '</ul>';	
					$('.preloader').addClass('hide');
					showMsgModel("",errorString);
					return false;
				}else{
					bootbox.confirm("Please re-confirm that you have filled all Academic details properly. No further claims for changes will be entertained.", function(result){ 
						if(result==true){
							saveAcademicDetails(reQarray);
						}else{
							$('.preloader').addClass('hide');
						}
					});
				}
			}
		});
	}
}
saveAcademicDetails = function (reQarray=""){
	var data = $('form#acdemic_details').serialize();
	data += '&reQarray='+JSON.stringify(reQarray);
	$.ajax({
		type: "POST",
		url: base_url+"student/save-academic-details",
		data: data,	
		dataType:'json',
		beforeSend: function(){	
			$('.preloader').removeClass('hide');
			$('#SubmitApplicantData').html('<span id="loader" class="fa fa-refresh fa-spin"></span> Loading Please Wait....');
		},
		success:function(data){	
			$('.preloader').addClass('hide');
			$('#SubmitApplicantData').html("Submit & Continue");
			if(data.status == true){
				window.history.pushState("", "", data.link);
				getPage();	
			}else if (data.status == false) {
				showMsgModel("Error In Saving",data.msg);
				$('#errorModelLabel').html('<span style="color:red"></span>');
				return false;
			}else{
				var errorString = '<ul style="padding-left: 20px;">';
				$.each( data.errorMsg, function( key, value) {
					$.each( value, function( key1, value2) {
						errorString += '<li>' + value + '</li>';
					});
					
				});
				errorString += '</ul>';	
				showMsgModel("  ",errorString);
				return false;
			}
		}
	});
	
}


/*Check all Form Live date*/
checkLiveDate=function(typ){
	var isStepValid = false;
	$.ajax({
		type: "GET",
		url: base_url+"student/check-livedate?typ="+typ,
		dataType:'json',
		async : false,
		beforeSend: function(){	
			var dialog = bootbox.dialog({
				message: '<p class="text-center">Please wait while we do something...</p>',
				closeButton: false
			});
		},
		success:function(data){	
			$('.modal').modal('hide');
			if(data.success == true){
				isStepValid = true;
			}else{
				msg=data.msg;
			}
		}
	});
	return isStepValid;
}

/* Student Reval Form Code Begins*/

examFormPayment=function(){
	$.ajax({
		type: "POST",
		url:base_url+"student/revel-process-payment",
		data: $('form#revalform').serialize(), 	
		dataType:'json',
		beforeSend: function(){	
			$('.preloader').removeClass('hide');
		},
		success:function(data){	
			if(data.status==true){
				window.history.pushState("", "", data.url);
				getPage();
			}else if(data.status==false){
				showMsgModel("Error",data.msg);
				return false;
			}else{
				var errorString = '<ul style="padding-left: 20px;">';
				$.each(data, function( key, value) {
					$.each( value, function( key1, value2) {
						errorString += '<li>' + value2 + '</li>';
					});
					
				});
				errorString += '</ul>';	
				showMsgModel("Error",errorString);
				return false;
			}
		}
	});	
}
searchStudentRevalDataView=function(){
	input = $('form#revalform').find(":input");
	$(input).each(function(index ,i) {
		if($(this).attr('name')!="_token"){
			if($('#' + $(this).attr('id')).hasClass('required') && $('#' + $(this).attr('id')).val()==""){
				errorElem.push($(this).attr('id'));
			}
		}
	});
	var sel= [];
	sel =$('form#revalform').find(":selected");
	$(sel).each(function(index ,i) {
		if($(this).attr('name')!="_token"){
			if($('#' + $(this).attr('id')).hasClass('required') && $('#' + $(this).attr('id')).val()==""){
				errorElem.push($(this).attr('id'));
			}
		}
	});
	if(errorElem.length > 0){
		errorBlock();
		showMsgModel("This is an warning message!","Please fill the required data to procced Further.")
		return false;
	}else{
		$.ajax({
			type: "POST",
			url:base_url+"student/get-reval-details-view",
			data: $('form#revalform').serialize(),	
			dataType:'json',
			beforeSend: function(){	
				$('.preloader').removeClass('hide');
			},
			success:function(data){	
				if(data.status==true){
					$('#revalSearchData').html(data.html);
					$("html,body").animate({scrollTop:240 },"slow");
					$('input[id="checkAllRevelForm"]').on('change', function(){
						if(typeof $('input[name=checkAllRevelForm]:checked').val()!="undefined"){
							$( 'input[id^="revelcheckbox_"]').prop('checked',true);
						}else{
							$( 'input[id^="revelcheckbox_"]').prop('checked','');
						}
					});
					$('input[id^="revelcheckbox_"]').find(':checked');
					if($('#MAX_SUB_TO_FILL').val()!=''){
						$('input[id^="revelcheckbox_"]').on('change', function(){
							if(typeof $('input[name='+$(this).attr('name')+']:checked').val()!="undefined"){
								if(parseInt($('#revalSearchData').find( "input:checked" ).length) > parseInt($('#MAX_SUB_TO_FILL').val())){
									showMsgModel("Warning",'Max Subject Allowed for Reval is '+$('#MAX_SUB_TO_FILL').val());
									$(this).prop('checked','');
								}
							}
						});
					}
				}else if(data.status==false){
					$('.preloader').addClass('hide');
					showMsgModel("Error",data.msg);
					return false;
				}else{
					var errorString = '<ul style="padding-left: 20px;">';
					$.each(data, function( key, value) {
						$.each( value, function( key1, value2) {
							errorString += '<li>' + value2 + '</li>';
						});
						
					});
					errorString += '</ul>';	
					showMsgModel("Error",errorString);
					return false;
				}
			}
		});	
	}
}
getRevelCourse =function(){
	if($('#revelcoursetype').val()!="" && $('#revelcoursetype').val()!=0){
		jQuery.ajax({
			type: 'POST',
			url: base_url+"/get-revel-course",
			dataType:'json',
			data: {COURSETYPE:$('#revelcoursetype').val()},
			beforeSend: function(){	
				var dialog = bootbox.dialog({
					message: '<p class="text-center">Please wait while we do something...</p>',
					closeButton: false
				});
			},
			success: function(data) {
				$('.modal').modal('hide');
				if(data.status==true){
					if(data.courseData !== null){
						var course_option = '<option value="">Select Course</option>';
						$.each(data.courseData, function(index, value) {
								course_option+='<option value="'+index+'">'+value+'</option>';
						 });
						 $('#revelCourseCode').html(course_option);
						 $('#revelCourseCode').selectpicker({
							liveSearch: true,
						});
						 $('#revelCourseCode').selectpicker('refresh');
						
					}
				}else if (data.status == false) {
					showMsgModel("Error",data.message);
				}else{
					var errorString = '<ul style="padding-left: 20px;">';
					$.each( data, function( key, value) {
						$.each( value, function( key1, value2) {
							errorString += '<li>' + value2 + '</li>';
						});
					
					});
					errorString += '</ul>';	
					showMsgModel("Error",errorString);
				}
				
			}
		});
	}else{ 
		$('#revelCourseCode').html("<option value=''>Select Course</option>"); $('#revelCourseCode').selectpicker('refresh');
	}

}

submitRevelForm= function (){
	var chk=false;
	$($( 'input[id^="revelcheckbox_"]')).each(function(index ,i) {
		if(typeof $('input[name='+$(this).attr("name")+']:checked').val()!="undefined"){
			chk=true;
		}
	});
	if(chk==true){
		jQuery.ajax({
			type: 'POST',
			url: base_url+"/student/submit-revel-form-data",
			dataType:'json',
			data: $('form#revalform').serialize(),
			beforeSend: function(){	
				var dialog = bootbox.dialog({
					message: '<p class="text-center">Please wait while we do something...</p>',
					closeButton: false
				});
			},
			success: function(data) {
				$('.modal').modal('hide');
				if(data.status==true){
					showMsgModel("Success",data.msg);
					searchStudentRevalDataView();
				}else if (data.status == false) {
					showMsgModel("Error",data.msg);
				}else{
					var errorString = '<ul style="padding-left: 20px;">';
					$.each( data, function( key, value) {
						$.each( value, function( key1, value2) {
							errorString += '<li>' + value2 + '</li>';
						});
					
					});
					errorString += '</ul>';	
					showMsgModel("Error",errorString);
				}
				
			}
		});
	}else{
		showMsgModel("Warning",'Please Select atleast one Subject For procced further.');
	}
}
deleteRevalForm=function(){
	bootbox.confirm({
		message: "Are You Sure you Want to Delete your Ravel Form.",
		buttons: {
			confirm: {
				label: 'Yes',
				className: 'btn-success'
			},
			cancel: {
				label: 'No',
				className: 'btn-danger'
			}
		},
		callback: function (result) {
			if(result){
					jQuery.ajax({
						type: 'POST',
						url: base_url+"/student/delete-Reval-Data",
						dataType:'json',
						data: $('form#revalform').serialize(),
						beforeSend: function(){	
							var dialog = bootbox.dialog({
								message: '<p class="text-center">Please wait while we do something...</p>',
								closeButton: false
							});
						},
						success: function(data) {
							$('.modal').modal('hide');
							if(data.status==true){
								showMsgModel("Success",data.msg);
								searchStudentRevalDataView();
							}else if (data.status == false) {
								showMsgModel("Error",data.msg);
							}else{
								var errorString = '<ul style="padding-left: 20px;">';
								$.each( data, function( key, value) {
									$.each( value, function( key1, value2) {
										errorString += '<li>' + value2 + '</li>';
									});
								
								});
								errorString += '</ul>';	
								showMsgModel("Error",errorString);
							}
							
						}
					});
			}

		}
	});
}

/* Student Reval Form Code Ends*/

/*check Eligbility*/
checkEligibility=function(typ){
	var isStepValid = true;
	url = typ.toLowerCase();
	
	return isStepValid;
}

makeUrl=function(type="GET",id="",url1=""){
	if(url1!="")
		window.history.pushState("", "", url1);
	getPage(type,id);
}		
/*get getPage*/
getPage=function(type="GET",id=""){
	$.ajax({
		type: type,
		url: window.location.href,
		data:$(id).serialize(),
		datatype:"json",
		async : false,
		beforeSend: function(){	
			$('.preloader').removeClass("hide");
		},
		success:function(data){	
			$('.preloader').addClass("hide");
			if(data.success == true){
				$('#dashApp').html(data.html)
				$('.breadcrumb').html($('#tempBreadcom').find('li'));
				$.getScript(base_url+'/js/users.js');
			}else if(data.success == false){
				var errorString = '<ul style="padding-left: 20px;">';
				$.each( data.msg, function( key, value) {
					$.each( value, function( key1, value2) {
						errorString += '<li>' + value2 + '</li>';
					});
				
				});
				errorString += '</ul>';	
				showMsgModel("Error",errorString);
			}else{
				msg=data.msg;
			}
		}
	});
}

getChangePasswordForm=function(){
	$.ajax({
		type: "GET",
		url: base_url+"/student/get-change-password-form",
		dataType:'json',
		beforeSend: function(){	
			var dialog = bootbox.dialog({
				message: '<p class="text-center">Please wait while we do something...</p>',
				closeButton: false
			});
		},
		success:function(data){	
			$('.modal').modal('hide');
			if(data.success == true){
				$('#errorModelLabel').html(data.label);
				$('#errorModelMsg').html(data.html);	
				$('#errorModel').modal('show');
				$('#changePassword').each(function(){
					$(this).find('input').keypress(function(e) { 
						if(e.which == 13) {
							changePassword();
						}
					}); 
				});
			}else{
				showMsgModel("Error","Something went wrong ! Try again later");
			}
		}
	});
}
updateEmailForm=function(){
	$.ajax({
		type: "GET",
		url: base_url+"/student/get-update-email",
		dataType:'json',
		beforeSend: function(){	
			var dialog = bootbox.dialog({
				message: '<p class="text-center">Please wait while we do something...</p>',
				closeButton: false
			});
		},
		success:function(data){	
			$('.modal').modal('hide');
			if(data.success == true){
				bootbox.dialog({
					title: data.label,
					message: data.html,
					closeButton: true
				});
				$('#updateEmail').each(function(){
					$(this).find('input').keypress(function(e) { 
						if(e.which == 13) {
							updateEmailMobile();
						}
					}); 
				});
			}else{
				showMsgModel("Error","Something went wrong ! Try again later");
			}
		}
	});
}
updateEmailMobile=function(){
	if(checkFormRequiredField('update-email',shm=false)==true){
		$.ajax({
			type: "POST",
			url: base_url+"student/update-email",
			data: $('form#update-email').serialize(),	
			dataType:'json',
			beforeSend: function(){	
				var dialog = bootbox.dialog({
					message: '<p class="text-center">Please wait while we do something...</p>',
					closeButton: false
				});
			},
			success:function(data){	
				$('.modal').modal('hide');
				if(data.status == true){
					location.reload();
				}else if (data.status == false) {
					showMsgModel("Error",data.message);
				}else{
					var errorString = '<ul style="padding-left: 20px;">';
					$.each( data, function( key, value) {
						$.each( value, function( key1, value2) {
							errorString += '<li>' + value2 + '</li>';
						});
					
					});
					errorString += '</ul>';	
					showMsgModel("Error",errorString);
				}
				
			}
		});
	}
}
changePassword = function(){
	if(checkFormRequiredField('changePassword',shm=false)==true){
		$.ajax({
			type: "POST",
			url: base_url+"student/changePassword",
			data: $('#changePassword').serialize(),	
			dataType:'json',
			beforeSend: function(){	
				var dialog = bootbox.dialog({
					message: '<p class="text-center">Please wait while we do something...</p>',
					closeButton: false
				});
			},
			success:function(data){	
				$('.modal').modal('hide');
				if(data.success == true){
					//location.reload();
					window.location.href = base_url;
				}else if (data.success == false) {
					showMsgModel("Error",data.message);
				}else{
					var errorString = '<ul style="padding-left: 20px;">';
					$.each( data, function( key, value) {
						$.each( value, function( key1, value2) {
							errorString += '<li>' + value2 + '</li>';
						});
					
					});
					errorString += '</ul>';	
					showMsgModel("Error",errorString);
				}
				
			}
		});
		
	}
}
checkFormRequiredField=function(formName,shm=true){
	var allValid = true;
	input = $('form#'+formName).find(":input");
	$(input).each(function(index ,i) {
		if($(this).attr('name')!="_token"){
			if($('#' + $(this).attr('id')).hasClass('required') && $('#' + $(this).attr('id')).val()==""){
				errorElem.push($(this).attr('id'));
			}
		}
	});
	var sel= [];
	sel =$('form#'+formName).find(":selected");
	$(sel).each(function(index ,i) {
		if($(this).attr('name')!="_token"){
			if($('#' + $(this).attr('id')).hasClass('required') && $('#' + $(this).attr('id')).val()==""){
				errorElem.push($(this).attr('id'));
			}
		}
	});
	
	input2 = $('form#'+formName).find(":input");
	$(input2).each(function(index ,i) {
		if ($(this).prop('type') == 'email'){
				if(!isEmail($(this).val())){
					errorElem.push($(this).attr('id'));
				}
		}
	});
	
	if(errorElem.length > 0){
		errorBlock();
		if(shm==true)
		showMsgModel("This is an warning message!","Please fill the required data to proceed Further.")
		allValid = false;
	}	
	return allValid;
}
showMsgModel=function(title,message,size=""){
	$('.modal').modal('hide');
	bootbox.alert({
		title: title,
		message:message,
		backdrop: true,
		size: size
	});
}	
/* Blank / empty Checking*/
errorBlock = function(){
	console.log(errorElem);
	$('.has-error').removeClass('has-error');
	
	if(errorElem.length > 0){
		for(var i = 0; i < errorElem.length; i++){
			$('#' + errorElem[i]).addClass('has-error');
			$('#' + errorElem[i]).parent('div').addClass('has-error');
			$('#' + errorElem[i]).parent().parent('.form-group').addClass('has-error');
			$('#' + errorElem[i]).parent('div').find("p").html("<i class='fa fa-warning'></i> This Field is Required");
		}
		errorElem = [];
	}
}
digits = function(obj, e, allowDecimal, allowNegative){
		var key;
		var isCtrl = false;
		var keychar;
		var reg;
		
		if(window.event) {
			key = e.keyCode;
			isCtrl = window.event.ctrlKey
		}
		else if(e.which) {
			key = e.which;
			isCtrl = e.ctrlKey;
		}
		
		if (isNaN(key)) return true;
		
		keychar = String.fromCharCode(key);
		
	 // check for backspace or delete, or if Ctrl was pressed
	 if (key == 8 || isCtrl)
	 {
		return true;
	 }

	 reg = /\d/;
	 var isFirstN = allowNegative ? keychar == '-' && obj.value.indexOf('-') == -1 : false;
	 var isFirstD = allowDecimal ? keychar == '.' && obj.value.indexOf('.') == -1 : false;
	 
	 return isFirstN || isFirstD || reg.test(keychar);
}
function printConfirm()
{
	/* $('#print_data tr td:nth-child(5)').hide();
	$('#print_data tr th:nth-child(5)').hide(); */

	var divToPrint=document.getElementById('printDiv');  
	newWin= window.open("");
	newWin.document.write(divToPrint.outerHTML);
	newWin.print();
	newWin.close(); 
	/* $('#print_data tr td:nth-child(5)').show();
	$('#print_data tr th:nth-child(5)').show(); */
}
getsemform =function(){
	$('#fcd').val(""); 
	if($('#coursecd').val()!=""){
		jQuery.ajax({ 
			type: 'POST',
			url: base_url+"student/getsemform",
			dataType:'json',
			data: {coursecd:$('#coursecd').val()},
			beforeSend: function(){	
				var dialog = bootbox.dialog({
					message: '<p class="text-center">Please wait while we do something...</p>',
					closeButton: false
				});
			},
			success: function(data) {
				$('.modal').modal('hide');
				if(data.status==true){
					if(data.semData !== null){
						var sem_option = '<option value="">Select Semester</option>';
						$.each(data.semData, function(index, value) {
								sem_option+='<option value="'+index+'">'+value+'</option>'; 
						 });
						 $('#semcode').html(sem_option);
						 $('#semcode').selectpicker({
							liveSearch: true,
						});
						 $('#semcode').selectpicker('refresh');
						
					}
				}else if (data.status == false) {
					showMsgModel("Error",data.message);
				}else{
					var errorString = '<ul style="padding-left: 20px;">';
					$.each( data, function( key, value) {
						$.each( value, function( key1, value2) {
							errorString += '<li>' + value2 + '</li>';
						});
					
					});
					errorString += '</ul>';	
					showMsgModel("Error",errorString);
				}
				
			}
		});
	}else{ 
		$('#semcode').html("<option value=''>Select Semester</option>"); $('#semcode').selectpicker('refresh');
	}

}

getfcdform =function(){
	$('#fcd').val(""); 
	if($('#coursecd').val()!=""){
		jQuery.ajax({ 
			type: 'POST',
			url: base_url+"student/getfcdform",
			dataType:'json',
			data: {coursecd:$('#coursecd').val(),semcode:$('#semcode').val(),exam_type:$('#exam_type').val()},
			beforeSend: function(){	
				var dialog = bootbox.dialog({
					message: '<p class="text-center">Please wait while we do something...</p>',
					closeButton: false
				});
			},
			success: function(data) {
				$('.modal').modal('hide');
				if(data.status==true){
					if(data.fcdData !== null){
						var fcd_option = '<option value="">Select Institute</option>';
						$.each(data.fcdData, function(index, value) {
								fcd_option+='<option value="'+index+'">'+value+'</option>'; 
						 });
						 $('#fcd').html(fcd_option);
						 $('#fcd').selectpicker({
							liveSearch: true,
						});
						 $('#fcd').selectpicker('refresh');
						
					}
				}else if (data.status == false) {
					showMsgModel("Error",data.message);
				}else{
					var errorString = '<ul style="padding-left: 20px;">';
					$.each( data, function( key, value) {
						$.each( value, function( key1, value2) {
							errorString += '<li>' + value2 + '</li>';
						});
					
					});
					errorString += '</ul>';	
					showMsgModel("Error",errorString);
				}
				
			}
		});
	}else{ 
		$('#fcd').html("<option value=''>Select Institute</option>"); $('#fcd').selectpicker('refresh');   
	} 
 
}
getDepartform=function(){ 
	if($('#facultycode').val()!="" && $('#facultycode').val()!=0){
		jQuery.ajax({
			type: 'POST',
			url: base_url+"student/get-departmentForm",
			dataType:'json',
			data: {FACULTY_ID:$('#facultycode').val()},
			beforeSend: function(){	
				var dialog = bootbox.dialog({
					message: '<p class="text-center">Please wait while we do something...</p>',
					closeButton: false
				});
			}, 
			success: function(data) {
				$('.modal').modal('hide');
				if(data.status==true){
					if(data.depData !== null){
						var department_option = '<option value="">Select Department</option>';
						$.each(data.depData, function(index, value) {
							if($('#DEPARTMENT_ID_DATA').val()==index){
								department_option+='<option value="'+index+'" selected="true">'+value+'</option>';
							}else{
								department_option+='<option value="'+index+'">'+value+'</option>';
							}
							
						 });
						 $('#departementcode').html(department_option);
					}
				}else if (data.status == false) {
					showMsgModel("Error",data.message);
				}else{
					$('#loader').hide();
					var errorString = '<ul style="padding-left: 20px;">';
					$.each( data, function( key, value) {
						$.each( value, function( key1, value2) {
							errorString += '<li>' + value2 + '</li>';
						});
					
					});
					errorString += '</ul>';	
					showMsgModel("Error",errorString);
				}
				
			}
		});
	}else{$('#departementcode').html("<option value=''>Select Department</option>");}
}

getCourseform=function(){ 
	if($('#departementcode').val()!="" && $('#departementcode').val()!=0 && $('#facultycode').val()!="" && $('#facultycode').val()!=0){
		jQuery.ajax({
			type: 'POST',
			url: base_url+"student/get-CourseForm",
			dataType:'json',
			data: {FACULTY_ID:$('#facultycode').val(),DEPARTMENT_ID:$('#departementcode').val(),exam_type:$('#exam_type').val()},
			beforeSend: function(){	
				var dialog = bootbox.dialog({
					message: '<p class="text-center">Please wait while we do something...</p>',
					closeButton: false
				});
			}, 
			success: function(data) {
				$('.modal').modal('hide');
				if(data.status==true){
					if(data.courseData !== null){ 
						var course_option = '<option value="">Select Course</option>';
						$.each(data.courseData, function(index, value) {
							if($('#COURSE_ID_DATA').val()==index){  
								course_option+='<option value="'+index+'" selected="true">'+value+'</option>';
							}else{
								course_option+='<option value="'+index+'">'+value+'</option>';
							}
							
						 });
						 $('#coursecd').html(course_option);						
						 $('#coursecd').selectpicker({
							liveSearch: true,
						});
						$('#coursecd').selectpicker('refresh');
					}
				}else if (data.status == false) {
					showMsgModel("Error",data.message);
				}else{
					$('#loader').hide();
					var errorString = '<ul style="padding-left: 20px;">';
					$.each( data, function( key, value) {
						$.each( value, function( key1, value2) {
							errorString += '<li>' + value2 + '</li>';
						});
					
					});
					errorString += '</ul>';	
					showMsgModel("Error",errorString);
				}
				 
			}
		});
	}else{$('#coursecd').html("<option value=''>Select Course</option>"); $('#coursecd').selectpicker('refresh');
	}
}
getResetField = function(obj){
   var formName = $(obj).closest('form').attr('name');
   if(formName=='studentppliction'){	
		if($(obj).attr('id')=="facultycode"){
			$('#departementcode').val("");					
            $('#coursecd').html("<option value=''>Select Course</option>"); $('#coursecd').selectpicker('refresh');			
		}
	
   }
}
CheckAlpha = function(event){
	var keyCode = ('which' in event) ? event.which : event.keyCode;
	if ((keyCode >= 65 && keyCode <= 90) || (keyCode >= 97 && keyCode <= 122) ||( keyCode == 32 ) || ( keyCode == 46) || ( keyCode == 8) || (keyCode == 96)) {
		return true; 
	}else {
		showMsgModel("","Please Enter Only Alphabet.");
		return false;
		event.preventDefault(); 
	}
}
/*Adding Js for Academic Details*/
checkvalue2  = function (id){
	if($('#MARKS'+id).val() !='' && $('#MARKSTOTAL'+id).val()!=''){
		var markspaper=0;
		if(parseInt($('#MARKSTOTAL'+id).val()) < parseInt($('#MARKS'+id).val())){
			showMsgModel("","Total Marks should not less than Marks Obtained.");
			$('#MARKS'+id).val("");
			$('#MARKSPER'+id).val("");
		}else{
			var devider = (parseInt($('#MARKS'+id).val()) /parseInt($('#MARKSTOTAL'+id).val()))*100;
			markspaper = $('#MARKSPER'+id).val(Math.round(devider*100)/100);
			getWeightageValue(id);
		}
	}else{
		$('#MARKSPER'+id).val("");
	}
}
	
checkvalue3 = function(id){
	if($('#MARKSTOTAL'+id).val() !='' && $('#MARKS'+id).val() !=''){
		var markspaper =0;
		if(parseInt($('#MARKS'+id).val()) > parseInt($('#MARKSTOTAL'+id).val())){
			showMsgModel("","Marks Obtained should not be greater than Total Marks.");
			$('#MARKSTOTAL'+id).val("");
			$('#MARKSPER'+id).val("");
			return false;
		}else{
			var devider = (parseInt($('#MARKS'+id).val()) / parseInt($('#MARKSTOTAL'+id).val()))*100;
			markspaper = $('#MARKSPER'+id).val(Math.round(devider*100)/100);
			getWeightageValue(id);
		}
	}else{
		$('#MARKSPER'+id).val("");
	}
}
checkvalue = function(ID){
	if($('#MARKSPER'+ID).val() <0){
		$('#MARKSPER'+ID).val(0);
	}else if($('#MARKSPER'+ID).val()>100){
		showMsgModel("","Marks Percentage Can not be graeter then 100%.");
		$('#MARKSPER'+ID).val("");
		return false;
	}else if($('#MARKSPER'+ID).val().indexOf('.') != -1){
		var rr = parseFloat($('#MARKSPER'+ID).val()).toFixed(2);
		$('#MARKSPER'+ID).val(rr);
	}
}
checkCGPvalue = function(ID){
	if($('#CGPA'+ID).val() <0){
		$('#CGPA'+ID).val(0);
	}else if($('#CGPA'+ID).val()>10){
		showMsgModel("","Marks CGPA Can not be graeter then 10%.");
		$('#CGPA'+ID).val("");
	}else if($('#CGPA'+ID).val().indexOf('.') != -1){
		var rr = parseFloat($('#CGPA'+ID).val()).toFixed(2);
		$('#CGPA'+ID).val(rr);
	}
}
changeUniver = function(val){
	if($('#UNIVER'+val).val() == 'OTHER'){
		$('#txtHTML'+val).show();
	}else{
		$('#txtHTML'+val).hide();
	}
}
CGPAPERTYPE=function(id){
	console.log($('#CGPA_PER_TYPE_'+id+ ' option:selected').val());
	$('#cgpa_per_'+id).addClass('hide');
	$('#marks_per_'+id).addClass('hide');
	$('#MARKS'+id).attr('readonly',false);
	$('#MARKSTOTAL'+id).attr('readonly',false);
	if($('#CGPA_PER_TYPE_'+id+ ' option:selected').val()=='per'){
		$('#marks_per_'+id).removeClass('hide');
		$('#CGPA'+id).val('');
	}else if($('#CGPA_PER_TYPE_'+id+ ' option:selected').val()=='cgpa'){
		$('#cgpa_per_'+id).removeClass('hide');
		$('#MARKS'+id).attr('readonly',true);
		$('#MARKS'+id).val('');
		$('#MARKSTOTAL'+id).attr('readonly',true);
		$('#MARKSTOTAL'+id).val('');
		$('#MARKSPER'+id).val('');
	}else{
		$('#MARKS'+id).attr('readonly',true);
		$('#MARKSTOTAL'+id).attr('readonly',true);
	}
}
checkApperingDrop=function(id){
	if(id!='' && $('#DIVISION'+id).val()=='102'){
		$('#CGPA_PER_TYPE_'+id).val('');
		$('#resultAw_'+id).prop('checked', true);
	}else{
		$('#resultAw_'+id).prop('checked', false);
	}
	$('#resultAw_'+id).trigger( "change" );
	CGPAPERTYPE(id);
}
/*End for Academic Details*/
/* copy same address */
copySame = function(){
	if($('#sameAddress').prop('checked')){
		$('#STUDENT_COMMUNICATION_ADDLINE1').val($('#STUDENT_PARMANENT_ADDLINE1').val());
		$('#STUDENT_COMMUNICATION_ADDLINE2').val($('#STUDENT_PARMANENT_ADDLINE2').val());
		$('#STUDENT_COMMUNICATION_ADDLINE3').val($('#STUDENT_PARMANENT_ADDLINE3').val());
		$('#STUDENT_COMMUNICATION_DISTRICT').val($('#STUDENT_PARMANENT_DISTRICT').val());
		$('#STUDENT_COMMUNICATION_STATE').val($('#STUDENT_PARMANENT_STATE').val());
		if($('#STUDENT_PARMANENT_STATE').val()=="S027" && $('#STUDENT_PARMANENT_OTHER').val()!=""){
			$('#com_other_state').removeClass("hide");
			$('#STUDENT_COMMUNICATION_OTHER').val($('#STUDENT_PARMANENT_OTHER').val());
		}
		$('#STUDENT_COMMUNICATION_PINCODE').val($('#STUDENT_PARMANENT_PINCODE').val());
		$('#STUDENT_COMMUNICATION_MOBILE').val($('#STUDENT_PARMANENT_MOBILE').val());
		$('#STUDENT_COMMUNICATION_CITY').val($('#STUDENT_PARMANENT_CITY').val());
		$('#STUDENT_COMMUNICATION_POSTOFFICE').val($('#STUDENT_PARMANENT_POSTOFFICE').val());
		$('#STUDENT_COMMUNICATION_LAND_STD_CODE').val($('#STUDENT_PARMANENT_LAND_STD_CODE').val());
		$('#STUDENT_COMMUNICATION_LAND_LINE').val($('#STUDENT_PARMANENT_LAND_LINE').val());
	}else{
		$('#STUDENT_COMMUNICATION_ADDLINE1').val('');
		$('#STUDENT_COMMUNICATION_ADDLINE2').val('');
		$('#STUDENT_COMMUNICATION_ADDLINE3').val('');
		$('#STUDENT_COMMUNICATION_DISTRICT').val('');
		$('#STUDENT_COMMUNICATION_STATE').val('');
		$('#STUDENT_COMMUNICATION_PINCODE').val('');
		$('#STUDENT_COMMUNICATION_MOBILE').val('');
		$('#STUDENT_COMMUNICATION_CITY').val('');
		$('#STUDENT_COMMUNICATION_POSTOFFICE').val('');
		$('#STUDENT_COMMUNICATION_LAND_STD_CODE').val('');
		$('#STUDENT_COMMUNICATION_LAND_LINE').val('');
		$('#com_other_state').addClass("hide");
		$('#STUDENT_COMMUNICATION_OTHER').val('');
	}
}
checkIsImage = function (id){
	if(checkFormRequiredField('doctUpload'+id,shm=true)==true){
		if($('#DocumentUp_'+id).val()==""){
			showMsgModel("","Please Select An Image / Pdf To upload.");
			return false;
		}else{
			var form = $('form#doctUpload'+id).get(0); 
			picOnsubmit(form,'upload_document','p'+id,'image');
		}
	}	
}
/* Applicant Details Save */
saveApplicantDetails= function(){
	if(checkFormRequiredField('applicationData',shm=true)==true){
		var reQarray="";
		$.each($('form#applicationData').find(":input"), function(index, value) {
		  if($(this).hasClass('required')){
			reQarray+=$(this).attr('name')+",";
		  }else if($(this).hasClass('se')){
			  reQarray+=$(this).attr('name')+",";
		  }
		});
		var data = $("form#applicationData").serialize();
		data += '&reQarray='+JSON.stringify(reQarray);
		$.ajax({
			type: "POST",
			url: base_url+"/student/save-application-details",
			dataType:'json',
			data: data,
			beforeSend: function(){	
				$('.preloader').removeClass('hide');
			},
			success:function(data){	
				$('.preloader').addClass('hide');
				if(data.success == true && data.link!=""){
					window.history.pushState("", "", data.link);
					getPage();				
				}else if(data.success==false){
					showMsgModel("Error",data.msg);
					return false;
				}else{
					var errorString = '<ul style="padding-left: 20px;">';
					$.each( data, function( key, value) {
						$.each( value, function( key1, value2) {
							errorString += '<li>' + value2 + '</li>';
						});
					
					});
					errorString += '</ul>';	
					showMsgModel("Warning",errorString,'large');
				}
			}
		});
	}
}

/* For Step Update and go to next page*/
saveProceedStep=function(id,sel_url){
	$.ajax({
		type: "POST",
		url: base_url+"/student/save-proceed-step",
		dataType:'json',
		data: {id:id,sel_url:sel_url},
		beforeSend: function(){	
			$('.preloader').removeClass('hide');
		},
		success:function(data){	
			$('.preloader').addClass('hide');
			if(data.success == true && data.link!=""){
				window.history.pushState("", "", data.link);
				getPage();				
			}else{
				showMsgModel("Error",data.message);
			}
		}
	});
}
/* END*/

getPaperGroup=function(){
	if(($('#hsc_group_id').val()!="" && $('#hsc_group_id').val()!=0)){		
		$('#SUBJECTCODE').html("<option value=''>Select Paper</option>"); $('#SUBJECTCODE').selectpicker('refresh');
		jQuery.ajax({
			type: 'POST',
			url: base_url+"/student/get-paper-group-seletion",
			dataType:'json',
			data: {hsc_group_id:$('#hsc_group_id').val(),lastid:$('#last_id').val()},
			beforeSend: function(){	
				var dialog = bootbox.dialog({
					message: '<p class="text-center">Please wait while we do something...</p>',
					closeButton: false
				});
			},
			success: function(data) {
				$('.modal').modal('hide');
				if(data.status==true){					
					$('#subjectSelectionEntrySection').html(data.html);
					
					$('#coursecd').selectpicker({
						liveSearch: true,
					});
					$('#coursecd').selectpicker('refresh');	
					//var k = new Unique('.sub','null');					
					chkSubjectUniqueSelection();					
				}else{
					$('#subjectSelectionEntrySection').html("");
					if(!!data.message && data.message!="")
						showMsgModel("Error",data.message);
				}				
			}
		});
	}
}

changeSylabus=function(){
		if(($('#SYLCODE').val()=="" && $('#SYLCODE').hasClass('required'))){
			errorElem.push('SYLCODE');
		}
		if(errorElem.length > 0){
			errorBlock();
			showMsgModel("This is an warning message!","Please select Syllabus.")
			return false;
		}else{		
	
		jQuery.ajax({
			type: 'POST',
			url: base_url+"/student/change-student-sylabus",
			dataType:'json',
			data: {SYLCODE:$('#SYLCODE').val()},
			
			success: function(data) {
				if(data.status==true){					
				  location.reload();				
				}else{
					if(!!data.message && data.message!="")
						showMsgModel("Error",data.message);
				}				
			}
		});
	}
}
getPaperGroupCbcs=function(){
	if(($('#hsc_group_id').val()!="" && $('#hsc_group_id').val()!=0)){		
		$('#SUBJECTCODE').html("<option value=''>Select Paper</option>"); $('#SUBJECTCODE').selectpicker('refresh');
		jQuery.ajax({
			type: 'POST',
			url: base_url+"/student/get-paper-group-seletion-cbcs",
			dataType:'json',
			data: {hsc_group_id:$('#hsc_group_id').val(),lastid:$('#last_id').val()},
			async:false,
			beforeSend: function(){	
				var dialog = bootbox.dialog({
					message: '<p class="text-center">Please wait while we do something...</p>',
					closeButton: false
				});
			},
			success: function(data) {
				$('.modal').modal('hide');
				if(data.status==true){					
					$('#subjectSelectionEntrySection').html(data.html);
					
					$('#coursecd').selectpicker({
						liveSearch: true,
					});
					$('#coursecd').selectpicker('refresh');	
					//var k = new Unique('.sub','null');					
					chkSubjectUniqueSelection();					
				}else{
					$('#subjectSelectionEntrySection').html("");
					if(!!data.message && data.message!="")
						showMsgModel("Error",data.message);
				}				
			}
		});
	}
}
chkSubjectUniqueSelection=function(){
	$('.subUnique').on('change',function(){
		var id= $(this).attr('id');
		if($("#"+id+" option:selected").val()!=""){
			$($('#'+id).parent().parent().find('select')).each(function(i,v){
				var v_id= $(this).attr('id');
				if(id != v_id){
					if($("#"+id+" option:selected").val() == $("#"+v_id+" option:selected").val()){
						showMsgModel("Error","You have already selected this !");
						$("#"+id).val("");
					}
				}
			});
		} 
		
		if($("#"+id+" option:selected").val()=="50_PER_OPT"){ 
		$('#50_PER_OPT').show();
		//$("#"+id+" option:selected").val('');
		}
		else
		{
			
			$($('#50_PER_OPT').find('.subUniqueOther')).each(function(i,v){
				var id= $(this).attr('id');
				$("#"+id).val("");
			});
			$('#50_PER_OPT').hide();
			
		} 
	}); 
	
	$('.subUniqueOther').on('change',function(){ 
		var id= $(this).attr('id'); 
		if($("#"+id+" option:selected").val()!=""){
			$($('.panel-body').find('.subUniqueOther')).each(function(i,v){
				var v_id= $(this).attr('id');
				if(id != v_id){
					if($("#"+id+" option:selected").val() == $("#"+v_id+" option:selected").val()){
						showMsgModel("Error","You have already selected this !");
						$("#"+id).val("");
					}
				}
			});
			
			$($('#50_PER_OPT').find('.subUniqueOther')).each(function(i,v){
				var id= $(this).attr('id');
				$('#50_PER_OPT').find("input[name='optional50Per']").val($("#"+id+" option:selected").val()) ;
			});
			
			$($('#additionalcp1').find('.subUniqueOther')).each(function(i,v){
				var id= $(this).attr('id');
				$('#additionalcp1').find("input[name='additionalCreditPaper1']").val($("#"+id+" option:selected").val()) ;
			});
			
			$($('#additionalcp2').find('.subUniqueOther')).each(function(i,v){
				var id= $(this).attr('id');
				$('#additionalcp2').find("input[name='additionalCreditPaper2']").val($("#"+id+" option:selected").val()) ;
			});
			
			$($('#nonecp1').find('.subUniqueOther')).each(function(i,v){
				var id= $(this).attr('id');
				$('#nonecp1').find("input[name='noneCreditPaper1']").val($("#"+id+" option:selected").val()) ;
			});
			
			$($('#nonecp2').find('.subUniqueOther')).each(function(i,v){
				var id= $(this).attr('id');
				$('#nonecp2').find("input[name='noneCreditPaper2']").val($("#"+id+" option:selected").val()) ;
			});
			
		}  
	});
	
	$($('#50_PER_OPT').find('.subUniqueOther')).each(function(i,v){
				var id= $(this).attr('id');
				$('#50_PER_OPT').find("input[name='optional50Per']").val($("#"+id+" option:selected").val()) ;
			});
			
			$($('#additionalcp1').find('.subUniqueOther')).each(function(i,v){
				var id= $(this).attr('id');
				$('#additionalcp1').find("input[name='additionalCreditPaper1']").val($("#"+id+" option:selected").val()) ;
			});
			
			$($('#additionalcp2').find('.subUniqueOther')).each(function(i,v){
				var id= $(this).attr('id');
				$('#additionalcp2').find("input[name='additionalCreditPaper2']").val($("#"+id+" option:selected").val()) ;
			});
			
			$($('#nonecp1').find('.subUniqueOther')).each(function(i,v){
				var id= $(this).attr('id');
				$('#nonecp1').find("input[name='noneCreditPaper1']").val($("#"+id+" option:selected").val()) ;
			});
			
			$($('#nonecp2').find('.subUniqueOther')).each(function(i,v){
				var id= $(this).attr('id');
				$('#nonecp2').find("input[name='noneCreditPaper2']").val($("#"+id+" option:selected").val()) ;
			});
	
	$('input[name=cbcs_credit_type]').change(function() {
		if($(this).val()!="None"){
			$('#additional_credit_paper').show();
			$('#none_credit_paper').hide();			
			$($('#none_credit_paper').find('.subUniqueOther')).each(function(i,v){
				var id= $(this).attr('id');
				$("#"+id).val("");
			});
		}else if($(this).val()!= "Additional"){
			$('#none_credit_paper').show();
			$('#additional_credit_paper').hide();			
			$($('#additional_credit_paper').find('.subUniqueOther')).each(function(i,v){
				var id= $(this).attr('id');
				$("#"+id).val("");
			});
		}
	});
	$('input[name=additonal_none_credit]').change(function() {
		if($(this).val()!="102"){
			$('#MORE_CBCS_CREDIT').show();
			
		}else{
			$('#MORE_CBCS_CREDIT').hide();	

			$($('#MORE_CBCS_CREDIT').find('.subUniqueOther')).each(function(i,v){
				var id= $(this).attr('id');
				$("#"+id).val("");
			});
			
		}
	});
}
saveDataForSubjectSelection=function(id,thisID){
	var sts=true;msg="";
	var idName =$(thisID).attr('id');
	for (i = 2; i <= $('#countOptional').val(); i++) { 
		var selectleng=0;
		$($('#div_'+id).find('.opti_'+i).find("select")).each(function(index ,i) {
			if($('#TYPEDR_'+id).val()=="R"){
				if($('#' + $(this).attr('id')+' option:selected').val()!="" && $('#' + $(this).attr('id')+' option:selected').val()!=0){
					 selectleng++;
				}
			}
		});
		if($('#div_'+id).find('.opti_'+i).find("input[name='opti_min']").val() > selectleng){
			sts=false;
			msg+="Minmum Subject Selected should be ."+$('#div_'+id).find('.opti_'+i).find("input[name='opti_min']").val()+" in "+$('#div_'+id).find('.opti_'+i).find('h2').html()+" Section.<br>";
		}
		if($('#div_'+id).find('.opti_'+i).find("input[name='opti_max']").val() < selectleng){
			sts=false;
			msg+="Total Subject Selected should be ."+$('#div_'+id).find('.opti_'+i).find("input[name='opti_max']").val()+" in "+$('#div_'+id).find('.opti_'+i).find('h2').html()+" Section.<br>";
		}
	}
	for (i = 2; i <= $('#countAdd').val(); i++) { 
		var selectleng=0;
		$($('#div_'+id).find('.addi_'+i).find("input")).each(function(index ,i) {
			if($('#TYPEDR_'+id).val()=="R"){
				if($(this).attr('type')=="checkbox" && typeof $('input[id='+$(this).attr("id")+']:checked').val()!="undefined"){
					 selectleng++;
				}
			}
		});
		if($('#div_'+id).find('.addi_'+i).find("input[name='addi_min']").val() > selectleng){
			sts=false;
			msg+="Minmum Subject Selected should be ."+$('#div_'+id).find('.addi_'+i).find("input[name='addi_min']").val()+" in "+$('#div_'+id).find('.addi_'+i).find('h2').html()+" Section.<br>";
		}
		if($('#div_'+id).find('.addi_'+i).find("input[name='addi_max']").val() < selectleng){
			sts=false;
			msg+="Total Subject Selected should be ."+$('#div_'+id).find('.addi_'+i).find("input[name='addi_max']").val()+" in "+$('#div_'+id).find('.addi_'+i).find('h2').html()+" Section.<br>";
		}
	}
	if(sts==false){
		$($('#div_'+id).find("select")).each(function(index ,i) {
			if($('#TYPEDR_'+id).val()=="R"){
				if($('#' + $(this).attr('id')).val()=="" || $('#' + $(this).attr('id')).val()=="0"){
					errorElem.push($(this).attr('id'));
				}
			}
		});
		if(msg!='')
			showMsgModel("This is an warning message!",msg);
		return false;
	}else{
		errorElem=[];
	}
	
	$($('#div_'+id).find('.comp').find(":input")).each(function(index ,i) {
		if($('#TYPEDR_'+id).val()=="R"){
			if($(this).attr('type')=="checkbox" && typeof $('input[id='+$(this).attr("id")+']:checked').val()=="undefined"){
				errorElem.push($(this).attr('id'));
			}
		}
	});
	if(errorElem.length > 0){
		errorBlock();
		showMsgModel("This is an warning message!","Please fill the required data to procced Further.");
		return false;
	}else{
	
	
	var data = $("form#save_subject_"+id).serialize();
	
		$.ajax({
			type: 'POST',
			url: base_url+"/student/save-paper-group-seletion",
			dataType:'json',
			data: data, 
			beforeSend: function(){	
				$( 'div[id^="div_"]' ).find('bt_save').attr('disabled',true);
				$( 'div[id^="div_"]' ).find('bt_save').attr('rhtml',$( 'div[id^="div_"]').find('bt_save').html());
				$( 'div[id^="div_"]' ).find('bt_save').html('<span class="fa fa-refresh fa-spin"></span>Please Wait ..');
			},
			success: function(data) {
				console.log(data);
                $( 'div[id^="div_"]' ).find('bt_save').attr('disabled',false);
				$( 'div[id^="div_"]' ).find('bt_save').html($( 'div[id^="div_"]' ).find('bt_save').attr('rhtml'));
				if(data.success==true){
					$( 'div[id^="div_"]' ).removeClass('in');
					var id1= parseInt(id)+1;
					$('#div_'+id1).addClass('in');
					if(idName == 'SubmitSubSelection' && data.link!=""){                       						
						window.history.pushState("", "", data.link);
						getPage();
					}
					  
				}else if(data.success==false){
					showMsgModel("Error",data.message);
					return false;
				}else{
					var errorString = '<ul style="padding-left: 20px;">';
					$.each(data, function( key, value) {
						$.each( value, function( key1, value2) {
							errorString += '<li>' + value2 + '</li>';
						});
						
					});
					errorString += '</ul>';	
					showMsgModel("Error",errorString); 
					return false;
				}
				
			}
		});
	}			
}

saveDataForCbcsSubjectSelection=function(id,thisID){
	var sts=true;msg="";
	var idName =$(thisID).attr('id');
	for (i = 2; i <= $('#countOptional').val(); i++) { 
		var selectleng=0;
		$($('#div_'+id).find('.opti_'+i).find("select")).each(function(index ,i) {
			if($('#TYPEDR_'+id).val()=="R"){
				if($('#' + $(this).attr('id')+' option:selected').val()!="" && $('#' + $(this).attr('id')+' option:selected').val()!=0){
					 selectleng++;
				}
			}
		});
		if($('#div_'+id).find('.opti_'+i).find("input[name='opti_min']").val() > selectleng){
			sts=false;
			msg+="Minmum Subject Selected should be ."+$('#div_'+id).find('.opti_'+i).find("input[name='opti_min']").val()+" in "+$('#div_'+id).find('.opti_'+i).find('h2').html()+" Section.<br>";
		}
		if($('#div_'+id).find('.opti_'+i).find("input[name='opti_max']").val() < selectleng){
			sts=false;
			msg+="Total Subject Selected should be ."+$('#div_'+id).find('.opti_'+i).find("input[name='opti_max']").val()+" in "+$('#div_'+id).find('.opti_'+i).find('h2').html()+" Section.<br>";
		}
	}
	for (i = 2; i <= $('#countAdd').val(); i++) { 
		var selectleng=0;
		$($('#div_'+id).find('.addi_'+i).find("input")).each(function(index ,i) {
			if($('#TYPEDR_'+id).val()=="R"){
				if($(this).attr('type')=="checkbox" && typeof $('input[id='+$(this).attr("id")+']:checked').val()!="undefined"){
					 selectleng++;
				}
			}
		});
		if($('#div_'+id).find('.addi_'+i).find("input[name='addi_min']").val() > selectleng){
			sts=false;
			msg+="Minmum Subject Selected should be ."+$('#div_'+id).find('.addi_'+i).find("input[name='addi_min']").val()+" in "+$('#div_'+id).find('.addi_'+i).find('h2').html()+" Section.<br>";
		}
		if($('#div_'+id).find('.addi_'+i).find("input[name='addi_max']").val() < selectleng){
			sts=false;
			msg+="Total Subject Selected should be ."+$('#div_'+id).find('.addi_'+i).find("input[name='addi_max']").val()+" in "+$('#div_'+id).find('.addi_'+i).find('h2').html()+" Section.<br>";
		}
	}
	if(sts==false){
		$($('#div_'+id).find("select")).each(function(index ,i) {
			if($('#TYPEDR_'+id).val()=="R"){
				if($('#' + $(this).attr('id')).val()=="" || $('#' + $(this).attr('id')).val()=="0"){
					errorElem.push($(this).attr('id'));
				}
			}
		});
		if(msg!='')
			showMsgModel("This is an warning message!",msg);
		return false;
	}else{
		errorElem=[];
	}
	
	if($('#THESIS_TITLE').hasClass('required') && $('#THESIS_TITLE').val()==""){
		errorElem.push('THESIS_TITLE');
	}
	
	$($('#div_'+id).find('.comp').find(":input")).each(function(index ,i) {
		if($('#TYPEDR_'+id).val()=="R"){
			if($(this).attr('type')=="checkbox" && typeof $('input[id='+$(this).attr("id")+']:checked').val()=="undefined"){
				errorElem.push($(this).attr('id'));
			}
		}
	});
	if(errorElem.length > 0){
		errorBlock();
		showMsgModel("This is an warning message!","Please fill the required data to procced Further.");
		return false;
	}else{
	
	
	var data = $("form#save_subject_"+id).serialize();
	
		$.ajax({
			type: 'POST',
			url: base_url+"/student/save-cbcs-paper-group-seletion",
			dataType:'json',
			data: data, 
			beforeSend: function(){	
				$( 'div[id^="div_"]' ).find('bt_save').attr('disabled',true);
				$( 'div[id^="div_"]' ).find('bt_save').attr('rhtml',$( 'div[id^="div_"]').find('bt_save').html());
				$( 'div[id^="div_"]' ).find('bt_save').html('<span class="fa fa-refresh fa-spin"></span>Please Wait ..');
			},
			success: function(data) {
				console.log(data);
                $( 'div[id^="div_"]' ).find('bt_save').attr('disabled',false);
				$( 'div[id^="div_"]' ).find('bt_save').html($( 'div[id^="div_"]' ).find('bt_save').attr('rhtml'));
				if(data.success==true){
					$( 'div[id^="div_"]' ).removeClass('in');
					var id1= parseInt(id)+1;
					$('#div_'+id1).addClass('in');
					if(idName == 'SubmitSubSelection' && data.link!=""){                       						
						window.history.pushState("", "", data.link);
						getPage();
					}
					  
				}else if(data.success==false){
					showMsgModel("Error",data.message);
					return false;
				}else{
					var errorString = '<ul style="padding-left: 20px;">';
					$.each(data, function( key, value) {
						$.each( value, function( key1, value2) {
							errorString += '<li>' + value2 + '</li>';
						});
						
					});
					errorString += '</ul>';	
					showMsgModel("Error",errorString); 
					return false;
				}
				
			}
		});
	}			
}

	
function Unique(select_class,no_select_value){
	this.select_class = select_class;//select class is the class of the drop down lists(<select> tags) that have to be exclusive
	this.no_select_value = no_select_value;//value that is present in the drop down list by default
	this.list_values = Array.apply(null, new Array($(this.select_class).length)).map(String.prototype.valueOf,this.no_select_value);
	
	var _self = this;
	$(select_class).change(function(){
		var prev_val = _self.list_values[$(_self.select_class).index($(this))];
		_self.list_values[$(_self.select_class).index($(this))] = $(this).val();
		_self.enableoption(_self.select_class,prev_val);
		_self.removeoption(_self.select_class,$(this).val(),$(_self.select_class).index($(this)));
	});
}

Unique.prototype.removeoption = function(classname,value,index){
	if(value==this.no_select_value)return;
	var arr = $(classname);
	for(var i=0;i<arr.length;i++){
		if(i==index)continue;
		$(arr[i]).children('option[value="'+value+'"]').attr('disabled',true);
	}
}

Unique.prototype.enableoption = function(classname,value){
	var arr = $(classname);
	for(var i=0;i<arr.length;i++){
		$(arr[i]).children('option[value="'+value+'"]').removeAttr('disabled');
	}
}

function checkSubjectSelection(grp,elem,min,max,sib,sibtot,gnam){	
	var ck = $('.'+grp).length;	
	var ck1 = $('.'+sib).length;	
	if(ck>1){
		var ar = [];
		$('.'+grp).each(function(){
			if( $(this).find('option:selected').val()!='' )
				ar.push($(this).find('option:selected').text());
		});
		var sorted_arr = ar.slice().sort();		
		var results = [];
		for (var i = 0; i < ar.length - 1; i++) {
			if (sorted_arr[i + 1] == sorted_arr[i]) {
				results.push(sorted_arr[i]);
			}
		}
		if(results.length >= 1 ){
			// console.log(results);
			var subs = results.join(', ');
			$(elem).val('');
			alert(subs+' Subject(s) can not be selected more than once.');
		}		
	}else{
		var val = $(elem).val();	
		if(val==''){
			alert('Group '+gnam+' should have at least '+min+' subject selected');
		}
	}	
	if(ck1>=1){ 
		var ar1 = [];
		$('.'+sib).each(function(){
			if( $(this).find('option:selected').val()!='' )
				ar1.push($(this).find('option:selected').text());
		});
		console.log(ar1.length);
		console.log(ar.length);
		console.log(sibtot);
		if( (ar1.length + ar.length) > sibtot ){
			$(elem).val('');
			alert('Groups '+gnam+' and '+$('#title_'+sib).html()+' can have at max '+sibtot+' subjects selected.');
			
		}
	}	
}
submitEnrollemntForm= function (lastid){	
	var ch=false;
	$($( 'input[id^="chk"]')).each(function(index ,i) {
		if(typeof $('input[name='+$(this).attr("name")+']:checked').val()!="undefined"){
			ch=true;
		}
	});
	if(ch==true){		
		jQuery.ajax({
			type: 'POST',
			url: base_url+"student/submit-enrollment-form-data/"+lastid,
			dataType:'json',
			data: {lastid:$('#last_id').val()},
			beforeSend: function(){	
				var dialog = bootbox.dialog({
					message: '<p class="text-center">Please wait while we do something...</p>',
					closeButton: false
				});
			},
			success: function(data) {				
				$('.modal').modal('hide');
				if(data.status==true){
					//showMsgModel("Success",data.msg);
                    window.history.pushState("", "", data.link);
				    getPage();
					
				}else if (data.status == false) {
					showMsgModel("Error",data.msg);
				}else{
					var errorString = '<ul style="padding-left: 20px;">';
					$.each( data, function( key, value) {
						$.each( value, function( key1, value2) {
							errorString += '<li>' + value2 + '</li>';
						});					 
					});
					errorString += '</ul>';	
					showMsgModel("Error",errorString);
				}				
			}
		});
	}else{
		showMsgModel("Warning","Please Click on above checkbox first to confirm then click here.");
		return false;
	}
}
submitEnrollemntFormWithoutPay= function (lastid){	
	var ch=false;
	$($( 'input[id^="chk"]')).each(function(index ,i) {
		if(typeof $('input[name='+$(this).attr("name")+']:checked').val()!="undefined"){
			ch=true;
		}
	});
	if(ch==true){		
		jQuery.ajax({
			type: 'POST',
			url: base_url+"student/submit-enrollment-without-pay/"+lastid,
			dataType:'json',
			data: {lastid:$('#last_id').val()},
			beforeSend: function(){	
				var dialog = bootbox.dialog({
					message: '<p class="text-center">Please wait while we do something...</p>',
					closeButton: false
				});
			},
			success: function(data) {				
				$('.modal').modal('hide');
				if(data.status==true){					
                    window.history.pushState("", "", data.link);
				    getPage();					
				}else if (data.status == false) {
					showMsgModel("Error",data.msg);
				}else{
					var errorString = '<ul style="padding-left: 20px;">';
					$.each( data, function( key, value) {
						$.each( value, function( key1, value2) {
							errorString += '<li>' + value2 + '</li>';
						});					 
					});
					errorString += '</ul>';	
					showMsgModel("Error",errorString);
				}				
			}
		});
	}else{
		showMsgModel("Warning","Please Click on above checkbox first to confirm then click here.");
		return false;
	}
}
apply = function(){
	if($('input[name=chkactive]:checked').val() == 'Accept'){
		$("#SubmitChk").prop("disabled",false);
	}else{
		$("#SubmitChk").prop("disabled",true);
	}
	
}

saveMyApplication = function (){
	input = $('form#studentappliction').find(":input");
	$(input).each(function(index ,i) {
		if($(this).attr('name')!="_token"){
			if($('#' + $(this).attr('id')).hasClass('required') && $('#' + $(this).attr('id')).val()==""){
				errorElem.push($(this).attr('id'));
			}
		}
	});
	var sel= [];
	sel =$('form#exam_form_entry').find(":selected");
	$(sel).each(function(index ,i) {
		if($(this).attr('name')!="_token"){
			if($('#' + $(this).attr('id')).hasClass('required') && $('#' + $(this).attr('id')).val()==""){
				errorElem.push($(this).attr('id'));
			}
		}
	});
	if(errorElem.length > 0){
		errorBlock();
		showMsgModel("This is an warning message!","Please fill the required data to procced Further.")
		return false;
	}else{
		var data = $('form#studentappliction').serialize();
		$.ajax({
			type: "POST",
			url: base_url+"student/save-application-status",
			data: data,	
			dataType:'json',
			beforeSend: function(){	
				var dialog = bootbox.dialog({
					message: '<p class="text-center">Please wait while we do something...</p>',
					closeButton: false
					});
			},
			success:function(data){	
				$('.modal').modal('hide');
				if(data.status == true){
					window.history.pushState("", "", data.link);
					getPage();	
				}else if (data.status == false) {
					showMsgModel("Error In Saving",data.msg);
					$('#errorModelLabel').html('<span style="color:red"></span>');
					return false;
				}else{
					var errorString = '<ul style="padding-left: 20px;">';
					$.each( data.errorMsg, function( key, value) {
						$.each( value, function( key1, value2) {
							errorString += '<li>' + value + '</li>';
						});
						
					});
					errorString += '</ul>';	
					showMsgModel("  ",errorString);
					return false;
				}
			}
		});
	}
}
//delete Enrollent form
delEnrollmentForm=function(lastid,examtype){
		
	bootbox.confirm({
		message: "Are You Sure you Want to Delete your "+examtype+" Form.",
		buttons: {
			confirm: {
				label: 'Yes',
				className: 'btn-success'
			},
			cancel: {
				label: 'No',
				className: 'btn-danger'
			}
		},
		callback: function (result) {
			if(result){
					jQuery.ajax({
						type: 'POST',
						url: base_url+"/student/delete-enrollment-Data/"+lastid,
						dataType:'json',
						//data: {lastid:lastid},
						beforeSend: function(){	
							var dialog = bootbox.dialog({
								message: '<p class="text-center">Please wait while we do something...</p>',
								closeButton: false
							});
						},
						success: function(data) {
							$('.modal').modal('hide');
							if(data.status==true){
								showMsgModel("Success",data.msg);
								location.reload();
								
							}else if (data.status == false) {
								showMsgModel("Error",data.msg);
							}else{
								var errorString = '<ul style="padding-left: 20px;">';
								$.each( data, function( key, value) {
									$.each( value, function( key1, value2) {
										errorString += '<li>' + value2 + '</li>';
									});
								
								});
								errorString += '</ul>';	
								showMsgModel("Error",errorString);
							}
							
						}
					});
			}

		}
	});
}
//Re-Appear
searchStudentReAppearDataView=function(){
	input = $('form#reappearform').find(":input");
	$(input).each(function(index ,i) {
		if($(this).attr('name')!="_token"){
			if($('#' + $(this).attr('id')).hasClass('required') && $('#' + $(this).attr('id')).val()==""){
				errorElem.push($(this).attr('id'));
			}
		}
	});
	var sel= [];
	sel =$('form#reappearform').find(":selected");
	$(sel).each(function(index ,i) {
		if($(this).attr('name')!="_token"){
			if($('#' + $(this).attr('id')).hasClass('required') && $('#' + $(this).attr('id')).val()==""){
				errorElem.push($(this).attr('id'));
			}
		}
	});
	if(errorElem.length > 0){
		errorBlock();
		showMsgModel("This is an warning message!","Please fill the required data to procced Further.")
		return false;
	}else{
		$.ajax({
			type: "POST",
			url:base_url+"student/get-re-appear-details-view",
			data: $('form#reappearform').serialize(),	
			dataType:'json',
			beforeSend: function(){	
				$('.preloader').removeClass('hide');
			},
			success:function(data){	
				if(data.status==true){
					$('#revalSearchData').html(data.html);
					$("html,body").animate({scrollTop:240 },"slow");
					$('input[id="checkAllRevelForm"]').on('change', function(){
						if(typeof $('input[name=checkAllRevelForm]:checked').val()!="undefined"){
							$( 'input[id^="revelcheckbox_"]').prop('checked',true);
						}else{
							$( 'input[id^="revelcheckbox_"]').prop('checked','');
						}
					});
					$('input[id^="revelcheckbox_"]').find(':checked');
					if($('#MAX_SUB_TO_FILL').val()!=''){
						$('input[id^="revelcheckbox_"]').on('change', function(){
							if(typeof $('input[name='+$(this).attr('name')+']:checked').val()!="undefined"){
								if(parseInt($('#revalSearchData').find( "input:checked" ).length) > parseInt($('#MAX_SUB_TO_FILL').val())){
									showMsgModel("Warning",'Max Subject Allowed for Reval is '+$('#MAX_SUB_TO_FILL').val());
									$(this).prop('checked','');
								}
							}
						});
					}
				}else if(data.status==false){
					$('.preloader').addClass('hide');
					showMsgModel("Error",data.msg);
					return false;
				}else{
					var errorString = '<ul style="padding-left: 20px;">';
					$.each(data, function( key, value) {
						$.each( value, function( key1, value2) {
							errorString += '<li>' + value2 + '</li>';
						});
						
					});
					errorString += '</ul>';	
					showMsgModel("Error",errorString);
					return false;
				}
			}
		});	
	}
}
 
submitReAppearForm= function (id,thisID=0){
	var data = $("form#save_subject_"+id).serialize();
	
	$.ajax({
			type: 'POST',
			url: base_url+"/student/submit-re-appear-form-data?thisID="+thisID,
			dataType:'json',
			data: data, 
			beforeSend: function(){	
				$( 'div[id^="div_"]' ).find('bt_save').attr('disabled',true);
				$( 'div[id^="div_"]' ).find('bt_save').attr('rhtml',$( 'div[id^="div_"]').find('bt_save').html());
				$( 'div[id^="div_"]' ).find('bt_save').html('<span class="fa fa-refresh fa-spin"></span>Please Wait ..');
			},
			success: function(data) {
                $( 'div[id^="div_"]' ).find('bt_save').attr('disabled',false);
				$( 'div[id^="div_"]' ).find('bt_save').html($( 'div[id^="div_"]' ).find('bt_save').attr('rhtml'));
				if(data.success==true){
					$( 'div[id^="div_"]' ).removeClass('in');
					var id1= parseInt(id)+1;
					$('#div_'+id1).addClass('in');
					if(thisID == '1' && data.link!=""){
						window.history.pushState("", "", data.link);
						getPage();
						location.reload(); 
					}
					
				}else if(data.success==false){
					showMsgModel("Error",data.msg);
					return false;
				}else{
					var errorString = '<ul style="padding-left: 20px;">';
					$.each(data, function( key, value) {
						$.each( value, function( key1, value2) {
							errorString += '<li>' + value2 + '</li>';
						});
						
					});
					errorString += '</ul>';	
					showMsgModel("Error",errorString); 
					return false;
				}
				
			}
		});
}

checkPreviousPayment=function(){
	if($('#STUDENTCODE').val()==""){
		errorElem.push('STUDENTCODE');
	}
	if(errorElem.length > 0){
		errorBlock2(1);
		showMsgModel("This is an warning message!","Something is wrong.")
		return false;
	}
	
	$.ajax({
		url:	base_url+"student/get-refund-data-check-student",
		type: "POST",
		dataType:"json",
		data:{STUDENTCODE:$('#STUDENTCODE').val()},
		beforeSend: function(){	
			//$('#processingDiv').find('.preloader').removeClass('hide');
			//$('#processingDiv').find('.progress').removeClass('hide');
		},					
		success: function(data){		
			if(data.status==true){
				showMsgModel("Success",data.msg);
				location.reload();
			}else{
				//$('#processingDiv').find('.preloader').addClass('hide');
				//$('#processingDiv').find('.progress').addClass('hide');
				showMsgModel("Error",data.msg);
				return false;
			}
		}
	});
}
